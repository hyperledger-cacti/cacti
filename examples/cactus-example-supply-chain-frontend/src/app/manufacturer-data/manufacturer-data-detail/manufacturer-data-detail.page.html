<ion-header>
  <ion-toolbar>
    <ion-title>
      <span *ngIf="!isReadOnly">Manufacturer Data Details</span>
      <span *ngIf="isReadOnly">View Product Details</span>
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="clickDismiss()">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- Only show the customer warning for read-only view by customers -->
  <ion-card *ngIf="isReadOnly" class="ion-margin">
    <ion-card-header>
      <ion-card-subtitle color="warning">Customer View</ion-card-subtitle>
      <ion-card-title>{{ manufacturerData.name }}</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p class="ion-text-center">
        <ion-text color="medium">
          You are viewing this data in read-only mode as a customer. Some
          sensitive information may be limited.
        </ion-text>
      </p>
    </ion-card-content>
  </ion-card>

  <form [formGroup]="form" class="ion-padding">
    <ion-list>
      <ion-item>
        <ion-label position="stacked">ID</ion-label>
        <ion-input formControlName="id" readonly></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Name</ion-label>
        <ion-input formControlName="name" type="text"></ion-input>
      </ion-item>

      <ion-item [class.sensitive-data]="isReadOnly">
        <ion-label position="stacked">
          Cost Price
          <ion-badge *ngIf="isReadOnly" color="warning">Sensitive</ion-badge>
        </ion-label>
        <ion-input
          formControlName="costPrice"
          type="number"
          inputmode="decimal"
          step="0.01"
          min="0"
        ></ion-input>
      </ion-item>

      <ion-item [class.sensitive-data]="isReadOnly">
        <ion-label position="stacked">
          Inventory
          <ion-badge *ngIf="isReadOnly" color="warning">Sensitive</ion-badge>
        </ion-label>
        <ion-input
          formControlName="inventory"
          type="number"
          inputmode="numeric"
          min="0"
        ></ion-input>
      </ion-item>

      <ion-item [class.sensitive-data]="isReadOnly">
        <ion-label position="stacked">
          Supplier Info
          <ion-badge *ngIf="isReadOnly" color="warning">Sensitive</ion-badge>
        </ion-label>
        <ion-input formControlName="supplierInfo" type="text"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Shipping Address</ion-label>
        <ion-textarea formControlName="shippingAddress" rows="3"></ion-textarea>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Customer Contact</ion-label>
        <ion-input formControlName="customerContact" type="text"></ion-input>
      </ion-item>
    </ion-list>
  </form>

  <!-- Debug information for manufacturers -->
  <ion-card *ngIf="!isReadOnly" class="ion-margin">
    <ion-card-header>
      <ion-card-subtitle color="success">Manufacturer View</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <p class="ion-text-center">
        <ion-text color="medium">
          You have full access to edit all product information as a
          manufacturer.
        </ion-text>
      </p>
    </ion-card-content>
  </ion-card>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-buttons slot="end">
      <ion-button
        *ngIf="!isReadOnly"
        (click)="clickSubmit()"
        [disabled]="!form.valid"
      >
        Submit
      </ion-button>
      <ion-button *ngIf="isReadOnly" (click)="clickDismiss()">
        Close
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>

<style>
  .sensitive-data {
    --background: rgba(255, 235, 205, 0.3);
  }
</style>
