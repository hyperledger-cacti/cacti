<app-page-heading pageTitle="Bookshelf List"></app-page-heading>

<ion-header>
  <ion-toolbar>
    <ion-title>Bookshelf Management</ion-title>
    <ion-buttons slot="end">
      <ion-button
        *ngIf="!isWalletConnected"
        (click)="connectWallet()"
        [disabled]="isLoading"
      >
        {{ isLoading ? 'Connecting...' : 'Connect Wallet' }}
      </ion-button>
      <ion-button *ngIf="isWalletConnected" disabled>
        Wallet Connected
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngIf="!isWalletConnected" class="ion-padding ion-text-center">
    <h2>Wallet Authentication Required</h2>
    <p>Please connect your wallet to access bookshelf data</p>
    <ion-button (click)="connectWallet()" [disabled]="isLoading">
      {{ isLoading ? 'Connecting...' : 'Connect Wallet' }}
    </ion-button>
  </div>

  <ion-list *ngIf="isWalletConnected">
    <ion-item *ngIf="bookshelves.length === 0" class="ion-text-center">
      <ion-label>No bookshelves found. Add one using the + button.</ion-label>
    </ion-item>

    <ion-item
      *ngFor="let bookshelf of bookshelves"
      button
      (click)="clickShowDetail(bookshelf)"
      detail
      class="ion-text-wrap"
    >
      <ion-label>
        <h2>Bookshelf #{{bookshelf.id}}</h2>
        <p>Shelf Count: {{bookshelf.shelfCount}}</p>
        <p>Bamboo Harvest ID: {{bookshelf.bambooHarvestId}}</p>
      </ion-label>
    </ion-item>
  </ion-list>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="clickAddNew()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
