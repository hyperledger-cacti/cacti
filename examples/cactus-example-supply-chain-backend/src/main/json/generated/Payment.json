{
  "contractName": "Payment",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_roleManagerAddress",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "EthReceived",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "paymentId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "payer",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "payee",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "productId",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "productType",
          "type": "string"
        }
      ],
      "name": "PaymentCreated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "paymentId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "transactionReference",
          "type": "string"
        }
      ],
      "name": "PaymentProcessed",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "paymentId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "enum Payment.PaymentStatus",
          "name": "newStatus",
          "type": "uint8"
        }
      ],
      "name": "PaymentStatusChanged",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_paymentId",
          "type": "uint256"
        }
      ],
      "name": "cancelPayment",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_payer",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_payee",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "_productId",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "_productType",
          "type": "string"
        }
      ],
      "name": "createPayment",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_paymentId",
          "type": "uint256"
        }
      ],
      "name": "getPayment",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "payer",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "payee",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "productId",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "productType",
          "type": "string"
        },
        {
          "internalType": "enum Payment.PaymentStatus",
          "name": "status",
          "type": "uint8"
        },
        {
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "transactionReference",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "_productId",
          "type": "string"
        }
      ],
      "name": "getPaymentIdByProduct",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "_productId",
          "type": "string"
        }
      ],
      "name": "getPaymentStatusByProduct",
      "outputs": [
        {
          "internalType": "enum Payment.PaymentStatus",
          "name": "",
          "type": "uint8"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "_productId",
          "type": "string"
        }
      ],
      "name": "isProductPaid",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "payments",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "payer",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "payee",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "productId",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "productType",
          "type": "string"
        },
        {
          "internalType": "enum Payment.PaymentStatus",
          "name": "status",
          "type": "uint8"
        },
        {
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "transactionReference",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_paymentId",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "_transactionReference",
          "type": "string"
        }
      ],
      "name": "processPayment",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "name": "productPayments",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_paymentId",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "_transactionReference",
          "type": "string"
        }
      ],
      "name": "refundPayment",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "roleManagerAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_newRoleManagerAddress",
          "type": "address"
        }
      ],
      "name": "updateRoleManagerAddress",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getContractBalance",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        }
      ],
      "name": "withdraw",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "stateMutability": "payable",
      "type": "receive"
    }
  ],
  "networks": {
    "11155111": {
      "address": "0xD4414Cd021aD95a1E91Bc09E620dA1f152B7521A"
    }
  },
  "bytecode": "0x6080604052348015600f57600080fd5b506040516114b23803806114b2833981016040819052602c916061565b60008054336001600160a01b031991821617909155600180549091166001600160a01b0392909216919091178155600455608f565b600060208284031215607257600080fd5b81516001600160a01b0381168114608857600080fd5b9392505050565b6114148061009e6000396000f3fe608060405234801561001057600080fd5b50600436106100ea5760003560e01c80638da5cb5b1161008c578063ae49fb0111610066578063ae49fb0114610210578063b990d4581461023b578063d33b8d231461024e578063f2fde38b1461026157600080fd5b80638da5cb5b146101bf57806395cbbc9a146101ea578063a2b41693146101fd57600080fd5b80636667543d116100c85780636667543d146101615780637b23d473146101845780638422927d1461019957806387d81789146101ac57600080fd5b806330d1f5b4146100ef5780633280a836146101185780635668672914610140575b600080fd5b6101026100fd366004610ea6565b610274565b60405161010f9190610f1b565b60405180910390f35b61012b610126366004610f2f565b6102c4565b60405161010f99989796959493929190610f98565b61015361014e366004611038565b610522565b60405190815260200161010f565b61017461016f366004610ea6565b6106ee565b604051901515815260200161010f565b6101976101923660046110cc565b610753565b005b6101976101a7366004610f2f565b610896565b61012b6101ba366004610f2f565b6109ef565b6000546101d2906001600160a01b031681565b6040516001600160a01b03909116815260200161010f565b6101976101f83660046110cc565b610be6565b61015361020b366004610ea6565b610ceb565b61015361021e366004610ea6565b805160208183018101805160038252928201919093012091525481565b610197610249366004611113565b610d13565b6001546101d2906001600160a01b031681565b61019761026f366004611113565b610d5f565b6000806003836040516102879190611135565b9081526020016040518091039020549050806000036102a95750600092915050565b60009081526002602052604090206006015460ff1692915050565b600080600080606080600080606060008a1180156102e357506004548a105b6103085760405162461bcd60e51b81526004016102ff90611151565b60008a81526002602081905260409091208054600182015492820154600383015460068401546007850154600486018054969795966001600160a01b0396871696909516949092600589019260ff9091169160088a0190859061036a9061117d565b80601f01602080910402602001604051908101604052809291908181526020018280546103969061117d565b80156103e35780601f106103b8576101008083540402835291602001916103e3565b820191906000526020600020905b8154815290600101906020018083116103c657829003601f168201915b505050505094508380546103f69061117d565b80601f01602080910402602001604051908101604052809291908181526020018280546104229061117d565b801561046f5780601f106104445761010080835404028352916020019161046f565b820191906000526020600020905b81548152906001019060200180831161045257829003601f168201915b505050505093508080546104829061117d565b80601f01602080910402602001604051908101604052809291908181526020018280546104ae9061117d565b80156104fb5780601f106104d0576101008083540402835291602001916104fb565b820191906000526020600020905b8154815290600101906020018083116104de57829003601f168201915b50505050509050995099509950995099509950995099509950509193959799909294969850565b6004805460009182919082610536836111b7565b9190505590506000604051806101200160405280838152602001896001600160a01b03168152602001886001600160a01b031681526020018781526020018681526020018581526020016000600381111561059357610593610ee3565b81524260208083019190915260408051808301825260008082529382015285835260028083529281902084518155918401516001830180546001600160a01b03199081166001600160a01b03938416179091559185015193830180549092169316929092179091556060820151600382015560808201519192508291600482019061061e908261122d565b5060a08201516005820190610633908261122d565b5060c082015160068201805460ff1916600183600381111561065757610657610ee3565b021790555060e08201516007820155610100820151600882019061067b908261122d565b50905050816003866040516106909190611135565b9081526020016040518091039020819055507f372b9dd6b16606f95db9ae2f24360a209dc38c2af5b990815d8e866fac6555308289898989896040516106db969594939291906112ec565b60405180910390a1509695505050505050565b6000806003836040516107019190611135565b9081526020016040518091039020549050806000036107235750600092915050565b600160008281526002602052604090206006015460ff16600381111561074b5761074b610ee3565b149392505050565b600082118015610764575060045482105b6107805760405162461bcd60e51b81526004016102ff90611151565b6000828152600260208190526040909120908101546001600160a01b03163314806107b557506000546001600160a01b031633145b6107d15760405162461bcd60e51b81526004016102ff90611344565b6001600682015460ff1660038111156107ec576107ec610ee3565b146108395760405162461bcd60e51b815260206004820152601e60248201527f5061796d656e74206d757374206265207061696420746f20726566756e64000060448201526064016102ff565b60068101805460ff191660039081179091556040517ff879d3b4028acb77eda7e8b250ce97ca51a46b47cb3482367d544fcf6fa4bdab916109e39185919061136c565b60405180910390a15050565b60026020819052600091825260409091208054600182015492820154600383015460048401805493956001600160a01b0390811695931693919291610a339061117d565b80601f0160208091040260200160405190810160405280929190818152602001828054610a5f9061117d565b8015610aac5780601f10610a8157610100808354040283529160200191610aac565b820191906000526020600020905b815481529060010190602001808311610a8f57829003601f168201915b505050505090806005018054610ac19061117d565b80601f0160208091040260200160405190810160405280929190818152602001828054610aed9061117d565b8015610b3a5780601f10610b0f57610100808354040283529160200191610b3a565b820191906000526020600020905b815481529060010190602001808311610b1d57829003601f168201915b5050505060068301546007840154600885018054949560ff9093169491935090610b639061117d565b80601f0160208091040260200160405190810160405280929190818152602001828054610b8f9061117d565b8015610bdc5780601f10610bb157610100808354040283529160200191610bdc565b820191906000526020600020905b815481529060010190602001808311610bbf57829003601f168201915b5050505050905089565b600082118015610bf7575060045482105b610c135760405162461bcd60e51b81526004016102ff90611151565b600082815260026020526040902060018101546001600160a01b0316331480610c4657506000546001600160a01b031633145b610c625760405162461bcd60e51b81526004016102ff90611344565b60068101805460ff1916600117905560088101610c7f838261122d565b507ff879d3b4028acb77eda7e8b250ce97ca51a46b47cb3482367d544fcf6fa4bdab836001604051610cb292919061136c565b60405180910390a1505050565b6000600382604051610cfd9190611135565b9081526020016040518091039020549050919050565b6000546001600160a01b03163314610d3d5760405162461bcd60e51b81526004016102ff90611399565b600180546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b03163314610d895760405162461bcd60e51b81526004016102ff90611399565b6001600160a01b038116610ddf5760405162461bcd60e51b815260206004820181905260248201527f4e6577206f776e65722063616e6e6f74206265207a65726f206164647265737360448201526064016102ff565b600080546001600160a01b0319166001600160a01b0392909216919091179055565b634e487b7160e01b600052604160045260246000fd5b600082601f830112610e2857600080fd5b813567ffffffffffffffff811115610e4257610e42610e01565b604051601f8201601f19908116603f0116810167ffffffffffffffff81118282101715610e7157610e71610e01565b604052818152838201602001851015610e8957600080fd5b816020850160208301376000918101602001919091529392505050565b600060208284031215610eb857600080fd5b813567ffffffffffffffff811115610ecf57600080fd5b610edb84828501610e17565b949350505050565b634e487b7160e01b600052602160045260246000fd5b60048110610f1757634e487b7160e01b600052602160045260246000fd5b9052565b60208101610f298284610ef9565b92915050565b600060208284031215610f4157600080fd5b5035919050565b60005b83811015610f63578181015183820152602001610f4b565b50506000910152565b60008151808452610f84816020860160208601610f48565b601f01601f19169290920160200192915050565b8981526001600160a01b038981166020830152881660408201526060810187905260c060808201819052600090610fd290830188610f6c565b82810360a0840152610fe48188610f6c565b9998505050505050505050565b80356001600160a01b038116811461103357600080fd5b919050565b600080600080600060a0868803121561105057600080fd5b6110598661101c565b94506110676020870161101c565b935060408601359250606086013567ffffffffffffffff81111561108a57600080fd5b61109688828901610e17565b925050608086013567ffffffffffffffff8111156110b357600080fd5b6110bf88828901610e17565b9150509295509295909350565b600080604083850312156110df57600080fd5b82359150602083013567ffffffffffffffff8111156110fd57600080fd5b61110985828601610e17565b9150509250929050565b60006020828403121561112557600080fd5b61112e8261101c565b9392505050565b60008251611147818460208701610f48565b9190910192915050565b602080825260129082015271125b9d985b1a59081c185e5b595b9d08125160721b604082015260600190565b600181811c9082168061119157607f821691505b6020821081036111b157634e487b7160e01b600052602260045260246000fd5b50919050565b6000600182016111d757634e487b7160e01b600052601160045260246000fd5b5060010190565b601f82111561122857806000526020600020601f840160051c810160208510156112055750805b601f840160051c820191505b818110156112255760008155600101611211565b50505b505050565b815167ffffffffffffffff81111561124757611247610e0156b6125b81611255845461117d565b846111de565b6020601f82116001811461128f57600083156112775750848201515b600019600385901b1c1916600184901b178455611225565b600084815260208120601f198516915b828110156112bf578785015182556020948501946001909201910161129f565b50848210156112dd5786840151600019600387901b60f8161c191681555b50505050600190811b01905550565b8681526001600160a01b038681166020830152851660408201526060810184905260c06080820181905260009061132590830185610f6c565b82810360a08401526113378185610f6c565b99985050505050505050565b6020808252600e908201526d139bdd08185d5d1a1bdc9a5e995960921b604082015260600190565b8281526040810161112e6020830184610ef9565b828152604060208201526000610edb6040830184610f6c565b60208082526025908201527f4f6e6c7920746865206f776e65722063616e2063616c6c20746869732066756e60408201526431ba34b7b760d91b60608201526080019056fea2646970667358221220e998ef34a3b3a815c3414a03f24ff16c3a3af6a6f8ac5762186995d8dd8e3f1064736f6c634300081c0033"
}
