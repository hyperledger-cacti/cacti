
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://hyperledger-cacti.github.io/cacti/cactus/packages/cactus-cmd-api-server/" rel="canonical"/>
<link href="../cactus-api-client/" rel="prev"/>
<link href="../cactus-common/" rel="next"/>
<link href="../../../images/HL_Cacti_Logo_Colorreverse.svg" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.41" name="generator"/>
<title>CMD Api Server - Using and Developing with Hyperledger Cacti</title>
<link href="../../../assets/stylesheets/main.0253249f.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
<script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#hyperledgercactus-cmd-api-server">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
<aside class="md-banner md-banner--warning">
<div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../../../..">
<strong>Click here to go to latest.</strong>
</a>
</div>
<script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
</aside>
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Using and Developing with Hyperledger Cacti" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="Using and Developing with Hyperledger Cacti">
<img alt="logo" src="../../../images/HL_Cacti_Logo_Colorreverse.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Using and Developing with Hyperledger Cacti
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              CMD Api Server
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/hyperledger/cacti" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    hyperledger/cacti
  </div>
</a>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
        
  
    
  
  Introduction

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../vision/">
        
  
    
  
  Vision

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../architecture/">
        
  
    
  
  Architecture

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../concepts/data-sharing/">
          
  
  Key Concepts

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../use-cases/">
        
  
    
  
  Use Cases

      </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../../introduction/">
          
  
  Cactus

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../weaver/introduction/">
          
  
  Weaver

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../guides/operations/">
          
  
  Guides

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../references/specs/">
          
  
  References

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../contributing/how-to-contribute/">
          
  
  Contributing

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../faqs/">
        
  
    
  
  FAQs

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../glossary/">
        
  
    
  
  Glossary

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../contact-us/">
        
  
    
  
  Contact Us

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../blog/2021-01-21-cross-chain-asset/">
          
  
  Blog

        </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Using and Developing with Hyperledger Cacti" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="Using and Developing with Hyperledger Cacti">
<img alt="logo" src="../../../images/HL_Cacti_Logo_Colorreverse.svg"/>
</a>
    Using and Developing with Hyperledger Cacti
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/hyperledger/cacti" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    hyperledger/cacti
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    Introduction
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../vision/">
<span class="md-ellipsis">
    Vision
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../architecture/">
<span class="md-ellipsis">
    Architecture
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Key Concepts
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Key Concepts
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/data-sharing/">
<span class="md-ellipsis">
    Data Sharing
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../use-cases/">
<span class="md-ellipsis">
    Use Cases
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
<span class="md-ellipsis">
    Cactus
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Cactus
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../introduction/">
<span class="md-ellipsis">
    Introduction
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../build/">
<span class="md-ellipsis">
    Building
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
<span class="md-ellipsis">
    Examples
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_3">
<span class="md-nav__icon md-icon"></span>
            Examples
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/supply-chain-app/">
<span class="md-ellipsis">
    Supply Chain Application
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../governance/">
<span class="md-ellipsis">
    Governance
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../code-of-conduct/">
<span class="md-ellipsis">
    Code of Conduct
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../contributing/">
<span class="md-ellipsis">
    Contributing
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../whitepaper/">
<span class="md-ellipsis">
    Whitepaper
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../regulatory-and-industry-initiatives-reading-list/">
<span class="md-ellipsis">
    Regulatory and Industry Initiatives
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_6_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_9" id="__nav_6_9_label" tabindex="0">
<span class="md-ellipsis">
    Components
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_6_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_9">
<span class="md-nav__icon md-icon"></span>
            Components
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cactus-api-client/">
<span class="md-ellipsis">
    Api Client
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    CMD Api Server
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    CMD Api Server
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#summary">
<span class="md-ellipsis">
      Summary
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#usage">
<span class="md-ellipsis">
      Usage
    </span>
</a>
<nav aria-label="Usage" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#basic-example">
<span class="md-ellipsis">
      Basic Example
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#remote-plugin-imports-at-runtime-example">
<span class="md-ellipsis">
      Remote Plugin Imports at Runtime Example
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#complete-example">
<span class="md-ellipsis">
      Complete Example
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deployment-scenarios">
<span class="md-ellipsis">
      Deployment Scenarios
    </span>
</a>
<nav aria-label="Deployment Scenarios" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#production-deployment-example">
<span class="md-ellipsis">
      Production Deployment Example
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#low-resource-deployment-example">
<span class="md-ellipsis">
      Low Resource Deployment Example
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#containerization">
<span class="md-ellipsis">
      Containerization
    </span>
</a>
<nav aria-label="Containerization" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#building-the-container-image-locally">
<span class="md-ellipsis">
      Building the container image locally
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#running-the-container-image-locally">
<span class="md-ellipsis">
      Running the container image locally
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#testing-api-calls-with-the-container">
<span class="md-ellipsis">
      Testing API calls with the container
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#prometheus-exporter">
<span class="md-ellipsis">
      Prometheus Exporter
    </span>
</a>
<nav aria-label="Prometheus Exporter" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#usage-prometheus">
<span class="md-ellipsis">
      Usage Prometheus
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#prometheus-integration">
<span class="md-ellipsis">
      Prometheus Integration
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#shutdown-hook">
<span class="md-ellipsis">
      Shutdown Hook
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#helper-code">
<span class="md-ellipsis">
      Helper code
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#faq">
<span class="md-ellipsis">
      FAQ
    </span>
</a>
<nav aria-label="FAQ" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-the-difference-between-a-cactus-node-and-a-cactus-api-server">
<span class="md-ellipsis">
      What is the difference between a Cactus Node and a Cactus API Server?
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#is-the-api-server-horizontally-scalable">
<span class="md-ellipsis">
      Is the API server horizontally scalable?
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#does-the-api-server-automatically-protect-me-from-malicious-plugins">
<span class="md-ellipsis">
      Does the API server automatically protect me from malicious plugins?
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#can-i-use-the-api-server-with-plugins-deployed-as-a-service">
<span class="md-ellipsis">
      Can I use the API server with plugins deployed as a service?
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cactus-common/">
<span class="md-ellipsis">
    Cactus Common
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cactus-core/">
<span class="md-ellipsis">
    Cactus Core
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cactus-plugin-consortium-manual/">
<span class="md-ellipsis">
    Consortium Manual
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cactus-plugin-keychain-vault/">
<span class="md-ellipsis">
    Keychain Vault
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cactus-plugin-ledger-connector-besu/">
<span class="md-ellipsis">
    Connector Besu
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cactus-plugin-ledger-connector-corda/">
<span class="md-ellipsis">
    Connector Corda
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cactus-plugin-ledger-connector-fabric/">
<span class="md-ellipsis">
    Connector Fabric
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cactus-test-api-client/">
<span class="md-ellipsis">
    Test Api Client
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cactus-test-cmd-api-server/">
<span class="md-ellipsis">
    Test CMD Api Server
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cactus-test-tooling/">
<span class="md-ellipsis">
    Test Tooling
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_10" id="__nav_6_10_label" tabindex="0">
<span class="md-ellipsis">
    Ledger Browser
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_10_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_10">
<span class="md-nav__icon md-icon"></span>
            Ledger Browser
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ledger-browser/overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ledger-browser/setup/">
<span class="md-ellipsis">
    Setup
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6_10_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_10_3" id="__nav_6_10_3_label" tabindex="0">
<span class="md-ellipsis">
    Plugin Apps
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_10_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_6_10_3">
<span class="md-nav__icon md-icon"></span>
            Plugin Apps
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ledger-browser/plugin-apps/app-patterns/">
<span class="md-ellipsis">
    App Patterns
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ledger-browser/plugin-apps/ethereum-browser/">
<span class="md-ellipsis">
    Ethereum Browser
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ledger-browser/plugin-apps/fabric-browser/">
<span class="md-ellipsis">
    Hyperledger Fabric Browser
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6_10_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_10_4" id="__nav_6_10_4_label" tabindex="0">
<span class="md-ellipsis">
    Developer Guide
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_10_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_6_10_4">
<span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ledger-browser/developer-guide/overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ledger-browser/developer-guide/architecture/">
<span class="md-ellipsis">
    Architecture
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ledger-browser/developer-guide/tutorial/">
<span class="md-ellipsis">
    Tutorial
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_11" id="__nav_6_11_label" tabindex="0">
<span class="md-ellipsis">
    Ledger Support
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_11_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_11">
<span class="md-nav__icon md-icon"></span>
            Ledger Support
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../support/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../support/besu/">
<span class="md-ellipsis">
    Hyperledger Besu
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../support/corda/">
<span class="md-ellipsis">
    R3 Corda
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../support/fabric/">
<span class="md-ellipsis">
    Hyperledger Fabric
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../support/iroha.md">
<span class="md-ellipsis">
    Hyperledger Iroha
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../support/xdai/">
<span class="md-ellipsis">
    xDai
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    Weaver
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Weaver
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/introduction/">
<span class="md-ellipsis">
    Framework
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
<span class="md-ellipsis">
    Getting Started
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_2">
<span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/guide/">
<span class="md-ellipsis">
    Using Weaver
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_2_2" id="__nav_7_2_2_label" tabindex="0">
<span class="md-ellipsis">
    Launching a Test Network
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_2_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_2_2">
<span class="md-nav__icon md-icon"></span>
            Launching a Test Network
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/test-network/overview/">
<span class="md-ellipsis">
    Component Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/test-network/setup-local/">
<span class="md-ellipsis">
    Setup with Locally Built Weaver Components
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/test-network/setup-local-docker/">
<span class="md-ellipsis">
    Setup with Locally Built Dockerized Weaver Components
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/test-network/setup-packages/">
<span class="md-ellipsis">
    Setup with Imported Weaver Components
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/test-network/setup-packages-docker/">
<span class="md-ellipsis">
    Setup with Imported Dockerized Weaver Components
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/test-network/ledger-initialization/">
<span class="md-ellipsis">
    Ledger Initialization
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/test-network/advanced-configuration/">
<span class="md-ellipsis">
    Advanced Configuration
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_2_3" id="__nav_7_2_3_label" tabindex="0">
<span class="md-ellipsis">
    Testing Interoperation Modes
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_2_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_2_3">
<span class="md-nav__icon md-icon"></span>
            Testing Interoperation Modes
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/interop/overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/interop/data-sharing/">
<span class="md-ellipsis">
    Data Sharing
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_2_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_2_3_3" id="__nav_7_2_3_3_label" tabindex="0">
<span class="md-ellipsis">
    Asset Exchange
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_2_3_3_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_7_2_3_3">
<span class="md-nav__icon md-icon"></span>
            Asset Exchange
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/interop/asset-exchange/overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/interop/asset-exchange/fabric-fabric/">
<span class="md-ellipsis">
    Fabric with Fabric
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/interop/asset-exchange/fabric-corda/">
<span class="md-ellipsis">
    Fabric with Corda
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/interop/asset-exchange/fabric-besu/">
<span class="md-ellipsis">
    Fabric with Besu
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/interop/asset-exchange/corda-corda/">
<span class="md-ellipsis">
    Corda with Corda
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/interop/asset-exchange/corda-besu/">
<span class="md-ellipsis">
    Corda with Besu
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/interop/asset-exchange/besu-besu/">
<span class="md-ellipsis">
    Besu with Besu
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/interop/asset-transfer/">
<span class="md-ellipsis">
    Asset Transfer
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_2_4" id="__nav_7_2_4_label" tabindex="0">
<span class="md-ellipsis">
    Enabling Weaver in your Network and Application
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_2_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_2_4">
<span class="md-nav__icon md-icon"></span>
            Enabling Weaver in your Network and Application
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/enabling-weaver-network/overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/enabling-weaver-network/fabric/">
<span class="md-ellipsis">
    Hyperledger Fabric
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/enabling-weaver-network/corda/">
<span class="md-ellipsis">
    R3 Corda
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/getting-started/enabling-weaver-network/besu/">
<span class="md-ellipsis">
    Hyperledger Besu
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
<span class="md-ellipsis">
    What is Interoperability?
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_3">
<span class="md-nav__icon md-icon"></span>
            What is Interoperability?
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/what-is-interoperability/understanding-interoperability/">
<span class="md-ellipsis">
    Understanding Interoperability
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/what-is-interoperability/levels-of-interoperability/">
<span class="md-ellipsis">
    Levels of Interoperability
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/what-is-interoperability/integration-patterns/">
<span class="md-ellipsis">
    Integration Patterns
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/interoperability-modes/">
<span class="md-ellipsis">
    Interoperability Modes
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/design-principles/">
<span class="md-ellipsis">
    Design Principles
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_6" id="__nav_7_6_label" tabindex="0">
<span class="md-ellipsis">
    User Stories
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_6">
<span class="md-nav__icon md-icon"></span>
            User Stories
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/user-stories/overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/user-stories/global-trade/">
<span class="md-ellipsis">
    Global Trade
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/user-stories/financial-markets/">
<span class="md-ellipsis">
    DvP in Financial Markets
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/user-stories/legacy-integration/">
<span class="md-ellipsis">
    Legacy Integration
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_7" id="__nav_7_7_label" tabindex="0">
<span class="md-ellipsis">
    Architecture and Design
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_7">
<span class="md-nav__icon md-icon"></span>
            Architecture and Design
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/architecture-and-design/overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/architecture-and-design/relay/">
<span class="md-ellipsis">
    Relay
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/architecture-and-design/drivers/">
<span class="md-ellipsis">
    Drivers
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/architecture-and-design/weaver-dapps/">
<span class="md-ellipsis">
    Weaver DApps
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/architecture-and-design/decentralized-identity/">
<span class="md-ellipsis">
    Decentralized Identity
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_8" id="__nav_7_8_label" tabindex="0">
<span class="md-ellipsis">
    Security Model
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_8">
<span class="md-nav__icon md-icon"></span>
            Security Model
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/security-model/authentication/">
<span class="md-ellipsis">
    Authentication
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/security-model/access-control/">
<span class="md-ellipsis">
    Access Control
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/security-model/proofs-and-verification/">
<span class="md-ellipsis">
    Proofs and Verification
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/security-model/end-to-end-security/">
<span class="md-ellipsis">
    End-to-End Security
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_9" id="__nav_7_9_label" tabindex="0">
<span class="md-ellipsis">
    Deployment Considerations
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_9">
<span class="md-nav__icon md-icon"></span>
            Deployment Considerations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/deployment-considerations/deployment-patterns/">
<span class="md-ellipsis">
    Deployment Patterns
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/deployment-considerations/governance-and-policies/">
<span class="md-ellipsis">
    Governance and Policies
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/deployment-considerations/legal-and-regulation/">
<span class="md-ellipsis">
    Legal and Regulation
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/specifications/">
<span class="md-ellipsis">
    Specifications
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/roadmap/">
<span class="md-ellipsis">
    Roadmap
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../weaver/publications/">
<span class="md-ellipsis">
    Publications
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    Guides
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            Guides
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../guides/operations/">
<span class="md-ellipsis">
    Operations
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../guides/developers/">
<span class="md-ellipsis">
    Developers
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../guides/upgrading/">
<span class="md-ellipsis">
    Upgrading
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    References
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            References
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/specs/">
<span class="md-ellipsis">
    Technical Specifications
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/publications/">
<span class="md-ellipsis">
    Publications
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/events/">
<span class="md-ellipsis">
    Events and Podcasts
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/business/">
<span class="md-ellipsis">
    Business Usage
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/best-practices/">
<span class="md-ellipsis">
    Project Best Practices
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/github/">
<span class="md-ellipsis">
    GitHub Contributions
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/openapi/">
<span class="md-ellipsis">
    OpenAPI Specs
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-ellipsis">
    Contributing
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contributing/how-to-contribute/">
<span class="md-ellipsis">
    How to Contribute
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contributing/reporting-a-bug/">
<span class="md-ellipsis">
    Reporting a Bug
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contributing/requesting-a-change/">
<span class="md-ellipsis">
    Requesting a Change
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contributing/asking-a-question/">
<span class="md-ellipsis">
    Asking a Question
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../faqs/">
<span class="md-ellipsis">
    FAQs
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../glossary/">
<span class="md-ellipsis">
    Glossary
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contact-us/">
<span class="md-ellipsis">
    Contact Us
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_14" type="checkbox"/>
<label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
<span class="md-ellipsis">
    Blog
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_14_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_14">
<span class="md-nav__icon md-icon"></span>
            Blog
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_14_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_14_1" id="__nav_14_1_label" tabindex="0">
<span class="md-ellipsis">
    January 21, 2021
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_14_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_14_1">
<span class="md-nav__icon md-icon"></span>
            January 21, 2021
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../blog/2021-01-21-cross-chain-asset/">
<span class="md-ellipsis">
    Enabling Cross-Chain Asset Exchange On Permissioned Blockchains
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../blog/2021-01-21-emergence-enterprise-interoperability/">
<span class="md-ellipsis">
    Emergence of Enterprise DLT Interoperability
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_14_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_14_2" id="__nav_14_2_label" tabindex="0">
<span class="md-ellipsis">
    November 07, 2022
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_14_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_14_2">
<span class="md-nav__icon md-icon"></span>
            November 07, 2022
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../blog/2022-11-07-introducing-hyperledger-cacti/">
<span class="md-ellipsis">
    Introducing Hyperledger Cacti, a multi-faceted pluggable interoperability framework
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_14_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_14_3" id="__nav_14_3_label" tabindex="0">
<span class="md-ellipsis">
    October 03, 2023
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_14_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_14_3">
<span class="md-nav__icon md-icon"></span>
            October 03, 2023
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../blog/2023-10-03-hyperledger-cacti-graduation/">
<span class="md-ellipsis">
    Hyperledger Cacti, A General-Purpose Modular Interoperability Framework, Moves to Graduated Status
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="hyperledgercactus-cmd-api-server"><code>@hyperledger/cactus-cmd-api-server</code><a class="headerlink" href="#hyperledgercactus-cmd-api-server" title="Permanent link">¶</a></h1>
<ul>
<li>
<p><a href="#summary">Summary</a></p>
</li>
<li>
<p><a href="#usage">Usage</a></p>
<ul>
<li>
<p><a href="#basic-example">Basic Example</a></p>
</li>
<li>
<p><a href="#remote-plugin-imports-at-runtime-example">Remote Plugin Imports at Runtime Example</a></p>
</li>
<li>
<p><a href="#complete-example">Complete Example</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#deployment-scenarios">Deployment Scenarios</a></p>
<ul>
<li>
<p><a href="#production-deployment-example">Production Deployment Example</a></p>
</li>
<li>
<p><a href="#low-resource-deployment-example">Low Resource Deployment Example</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#containerization">Containerization</a></p>
<ul>
<li>
<p><a href="#building-the-container-image-locally">Building the container image locally</a></p>
</li>
<li>
<p><a href="#running-the-container-image-locally">Running the container image locally</a></p>
</li>
<li>
<p><a href="#testing-api-calls-with-the-container">Testing API calls with the container</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#prometheus-exporter">Prometheus Exporter</a></p>
<ul>
<li>
<p><a href="#usage-prometheus">Usage Prometheus</a></p>
</li>
<li>
<p><a href="#prometheus-integration">Prometheus Integration</a></p>
</li>
<li>
<p><a href="#shutdown-hook">Shutdown Hook</a></p>
</li>
<li>
<p><a href="#helper-code">Helper code</a> - <a href="#responsetypets">response.type.ts</a> - <a href="#data-fetcherts">data-fetcher.ts</a> - <a href="#metricsts">metrics.ts</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#faq">FAQ</a></p>
<ul>
<li>
<p><a href="#what-is-the-difference-between-a-cactus-node-and-a-cactus-api-server">What is the difference between a Cactus Node and a Cactus API Server?</a></p>
</li>
<li>
<p><a href="#is-the-api-server-horizontally-scalable">Is the API server horizontally scalable?</a></p>
</li>
<li>
<p><a href="#does-the-api-server-automatically-protect-me-from-malicious-plugins">Does the API server automatically protect me from malicious plugins?</a></p>
</li>
<li>
<p><a href="#can-i-use-the-api-server-with-plugins-deployed-as-a-service">Can I use the API server with plugins deployed as a service?</a></p>
</li>
</ul>
</li>
</ul>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">¶</a></h2>
<p>This package is part of the Hyperledger Cactus blockchain integration framework and is used as a shell/container of sort for housing different Cactus plugins (which all live in their own npm packages as well).</p>
<p>The API server gives you for free the following benefits, should you choose to use it:</p>
<ol>
<li>
<p>Automatic wiring of API endpoints for Cactus plugins which implement the <code>IPluginWebService</code> Typescript interface</p>
</li>
<li>
<p>Lightweight inversion of control container provided to plugins in the form of the <code>PluginRegistry</code> so that plugins can depend on each other in a way that each plugin instance can be uniquely identified and obtained by other plugins. A great example of this in action is ledger connector plugins frequently using the <code>PluginRegistry</code> to look up instances of keychain plugins to get access to secrets that are needed for the connector plugins to accomplish certain tasks such as cryptographically signing some information or SSH-ing into a server instance in order to upload and deploy binary (or otherwise) artifacts of smart contracts.</p>
</li>
</ol>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">¶</a></h2>
<p>Like with most parts of the framework in Cactus, using the <code>ApiServer</code> is optional.</p>
<p>To see the <code>ApiServer</code> in action, the end to end tests of the framework are a great place to start. A few excerpts that regularly occur in said tests can be seen below as well for the reader’s convenience.</p>
<p>One of our design principles for the framework is <strong>secure by default</strong> which means that the API servers</p>
<ol>
<li>
<p>assumes TLS is enabled by default and</p>
</li>
<li>
<p>cross-origin resource sharing is disabled completely</p>
</li>
</ol>
<h3 id="basic-example">Basic Example<a class="headerlink" href="#basic-example" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="ch">#!/usr/bin/env node</span>
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ApiServer</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">"../api-server"</span><span class="p">;</span>
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ConfigService</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">"../config/config-service"</span><span class="p">;</span>
<a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Logger</span><span class="p">,</span><span class="w"> </span><span class="nx">LoggerProvider</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">"@hyperledger/cactus-common"</span><span class="p">;</span>
<a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>
<a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="kd">const</span><span class="w"> </span><span class="nx">log</span><span class="o">:</span><span class="w"> </span><span class="nx">Logger</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="nx">LoggerProvider</span><span class="p">.</span><span class="nx">getOrCreate</span><span class="p">({</span>
<a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">  </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s2">"cactus-api"</span><span class="p">,</span>
<a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">  </span><span class="nx">level</span><span class="o">:</span><span class="w"> </span><span class="s2">"INFO"</span><span class="p">,</span>
<a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="p">});</span>
<a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a>
<a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="kd">const</span><span class="w"> </span><span class="nx">main</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="err">\</span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">configService</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ConfigService</span><span class="p">();</span>
<a href="#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">configService</span><span class="p">.</span><span class="nx">getOrCreate</span><span class="p">();</span>
<a href="#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">serverOptions</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">getProperties</span><span class="p">();</span>
<a href="#__codelineno-0-16" id="__codelineno-0-16" name="__codelineno-0-16"></a>
<a href="#__codelineno-0-17" id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">  </span><span class="nx">LoggerProvider</span><span class="p">.</span><span class="nx">setLogLevel</span><span class="p">(</span><span class="nx">serverOptions</span><span class="p">.</span><span class="nx">logLevel</span><span class="p">);</span>
<a href="#__codelineno-0-18" id="__codelineno-0-18" name="__codelineno-0-18"></a>
<a href="#__codelineno-0-19" id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">argv</span><span class="err">\</span><span class="p">[</span><span class="mf">2</span><span class="err">\</span><span class="p">].</span><span class="nx">includes</span><span class="p">(</span><span class="s2">"help"</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-0-20" id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">helpText</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="nx">ConfigService</span><span class="p">.</span><span class="nx">getHelpText</span><span class="p">();</span>
<a href="#__codelineno-0-21" id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">helpText</span><span class="p">);</span>
<a href="#__codelineno-0-22" id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="err">\</span><span class="sb">`Effective Configuration:\`);</span>
<a href="#__codelineno-0-23" id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="sb">    log.info(JSON.stringify(serverOptions, null, 4));</span>
<a href="#__codelineno-0-24" id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="sb">  } else {</span>
<a href="#__codelineno-0-25" id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="sb">    const apiServer \= new ApiServer({ config: serverOptions });</span>
<a href="#__codelineno-0-26" id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="sb">    await apiServer.start();</span>
<a href="#__codelineno-0-27" id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="sb">  }</span>
<a href="#__codelineno-0-28" id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="sb">};</span>
<a href="#__codelineno-0-29" id="__codelineno-0-29" name="__codelineno-0-29"></a>
<a href="#__codelineno-0-30" id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="sb">export async function launchApp(): Promise&lt;void\&gt; {</span>
<a href="#__codelineno-0-31" id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="sb">  try {</span>
<a href="#__codelineno-0-32" id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sb">    await main();</span>
<a href="#__codelineno-0-33" id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sb">    log.info(\`Cactus API server launched OK \`);</span>
<a href="#__codelineno-0-34" id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sb">  } catch (ex) {</span>
<a href="#__codelineno-0-35" id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sb">    log.error(\`Cactus API server crashed: \`, ex);</span>
<a href="#__codelineno-0-36" id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sb">    process.exit(1);</span>
<a href="#__codelineno-0-37" id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sb">  }</span>
<a href="#__codelineno-0-38" id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sb">}</span>
<a href="#__codelineno-0-39" id="__codelineno-0-39" name="__codelineno-0-39"></a>
<a href="#__codelineno-0-40" id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sb">if (require.main \=== module) {</span>
<a href="#__codelineno-0-41" id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sb">  launchApp();</span>
<a href="#__codelineno-0-42" id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="sb">}</span>
</code></pre></div>
<h3 id="remote-plugin-imports-at-runtime-example">Remote Plugin Imports at Runtime Example<a class="headerlink" href="#remote-plugin-imports-at-runtime-example" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">PluginImportType</span><span class="p">,</span><span class="w"> </span><span class="nx">PluginImportAction</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">"@hyperledger/cactus-core-api"</span><span class="p">;</span>
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ApiServer</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">"@hyperledger/cactus-cmd-api-server"</span><span class="p">;</span>
<a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ConfigService</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">"@hyperledger/cactus-cmd-api-server"</span><span class="p">;</span>
<a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Logger</span><span class="p">,</span><span class="w"> </span><span class="nx">LoggerProvider</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">"@hyperledger/cactus-common"</span><span class="p">;</span>
<a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a>
<a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="kd">const</span><span class="w"> </span><span class="nx">main</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="err">\</span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a>
<a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">configService</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ConfigService</span><span class="p">();</span>
<a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">apiServerOptions</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">configService</span><span class="p">.</span><span class="nx">newExampleConfig</span><span class="p">();</span>
<a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">  </span><span class="c1">// If there is no configuration file on the file system, just set it to empty string</span>
<a href="#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">  </span><span class="nx">apiServerOptions</span><span class="p">.</span><span class="nx">configFile</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">;</span>
<a href="#__codelineno-1-12" id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">  </span><span class="c1">// Enable CORS for</span>
<a href="#__codelineno-1-13" id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">  </span><span class="nx">apiServerOptions</span><span class="p">.</span><span class="nx">apiCorsDomainCsv</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="s2">"your.domain.example.com"</span><span class="p">;</span>
<a href="#__codelineno-1-14" id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">  </span><span class="nx">apiServerOptions</span><span class="p">.</span><span class="nx">apiPort</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="mf">3000</span><span class="p">;</span>
<a href="#__codelineno-1-15" id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">  </span><span class="nx">apiServerOptions</span><span class="p">.</span><span class="nx">cockpitPort</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="mf">3100</span><span class="p">;</span>
<a href="#__codelineno-1-16" id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="w">  </span><span class="nx">apiServerOptions</span><span class="p">.</span><span class="nx">grpcPort</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="mf">5000</span><span class="p">;</span>
<a href="#__codelineno-1-17" id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">  </span><span class="c1">// Disble TLS (or provide TLS certs for secure HTTP if you are deploying to production)</span>
<a href="#__codelineno-1-18" id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="w">  </span><span class="nx">apiServerOptions</span><span class="p">.</span><span class="nx">apiTlsEnabled</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<a href="#__codelineno-1-19" id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="w">  </span><span class="nx">apiServerOptions</span><span class="p">.</span><span class="nx">plugins</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="err">\</span><span class="p">[</span>
<a href="#__codelineno-1-20" id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="w">    </span><span class="p">{</span>
<a href="#__codelineno-1-21" id="__codelineno-1-21" name="__codelineno-1-21"></a><span class="w">      </span><span class="c1">// npm package name of the plugin you are installing</span>
<a href="#__codelineno-1-22" id="__codelineno-1-22" name="__codelineno-1-22"></a><span class="w">      </span><span class="c1">// Since this will be imported at runtime, you are responsible for</span>
<a href="#__codelineno-1-23" id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="w">      </span><span class="c1">// installing the package yourself prior to launching the API server.</span>
<a href="#__codelineno-1-24" id="__codelineno-1-24" name="__codelineno-1-24"></a><span class="w">      </span><span class="nx">packageName</span><span class="o">:</span><span class="w"> </span><span class="s2">"@hyperledger/cactus-plugin-keychain-vault"</span><span class="p">,</span>
<a href="#__codelineno-1-25" id="__codelineno-1-25" name="__codelineno-1-25"></a><span class="w">      </span><span class="c1">// The REMOTE value means that a different plugin factory will be imported and</span>
<a href="#__codelineno-1-26" id="__codelineno-1-26" name="__codelineno-1-26"></a><span class="w">      </span><span class="c1">// called to obtain the plugin instance. This way plugins can support them</span>
<a href="#__codelineno-1-27" id="__codelineno-1-27" name="__codelineno-1-27"></a><span class="w">      </span><span class="c1">// being imported by the API server regardless of the language the plugin</span>
<a href="#__codelineno-1-28" id="__codelineno-1-28" name="__codelineno-1-28"></a><span class="w">      </span><span class="c1">// was written in.</span>
<a href="#__codelineno-1-29" id="__codelineno-1-29" name="__codelineno-1-29"></a><span class="w">      </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">PluginImportType</span><span class="p">.</span><span class="nx">REMOTE</span><span class="p">,</span>
<a href="#__codelineno-1-30" id="__codelineno-1-30" name="__codelineno-1-30"></a><span class="w">      </span><span class="c1">// The INSTALL value means that the plugin will be installed instead of</span>
<a href="#__codelineno-1-31" id="__codelineno-1-31" name="__codelineno-1-31"></a><span class="w">      </span><span class="c1">// only instantiate it</span>
<a href="#__codelineno-1-32" id="__codelineno-1-32" name="__codelineno-1-32"></a><span class="w">      </span><span class="nx">action</span><span class="o">:</span><span class="w"> </span><span class="nx">PluginImportAction</span><span class="p">.</span><span class="nx">INSTALL</span><span class="p">,</span>
<a href="#__codelineno-1-33" id="__codelineno-1-33" name="__codelineno-1-33"></a><span class="w">      </span><span class="c1">// The options that will be passed in to the plugin factory</span>
<a href="#__codelineno-1-34" id="__codelineno-1-34" name="__codelineno-1-34"></a><span class="w">      </span><span class="nx">options</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-1-35" id="__codelineno-1-35" name="__codelineno-1-35"></a><span class="w">        </span><span class="nx">keychainId</span><span class="o">:</span><span class="w"> </span><span class="s2">"\_keychainId\_"</span><span class="p">,</span>
<a href="#__codelineno-1-36" id="__codelineno-1-36" name="__codelineno-1-36"></a><span class="w">        </span><span class="nx">instanceId</span><span class="o">:</span><span class="w"> </span><span class="s2">"\_instanceId\_"</span><span class="p">,</span>
<a href="#__codelineno-1-37" id="__codelineno-1-37" name="__codelineno-1-37"></a><span class="w">        </span><span class="nx">remoteConfig</span><span class="o">:</span><span class="w"> </span><span class="nx">configuration</span><span class="p">,</span>
<a href="#__codelineno-1-38" id="__codelineno-1-38" name="__codelineno-1-38"></a><span class="w">      </span><span class="p">},</span>
<a href="#__codelineno-1-39" id="__codelineno-1-39" name="__codelineno-1-39"></a><span class="w">    </span><span class="p">},</span>
<a href="#__codelineno-1-40" id="__codelineno-1-40" name="__codelineno-1-40"></a><span class="w">  </span><span class="err">\</span><span class="p">];</span>
<a href="#__codelineno-1-41" id="__codelineno-1-41" name="__codelineno-1-41"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">configService</span><span class="p">.</span><span class="nx">newExampleConfigConvict</span><span class="p">(</span><span class="nx">apiServerOptions</span><span class="p">);</span>
<a href="#__codelineno-1-42" id="__codelineno-1-42" name="__codelineno-1-42"></a>
<a href="#__codelineno-1-43" id="__codelineno-1-43" name="__codelineno-1-43"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">apiServer</span><span class="w"> </span><span class="err">\</span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ApiServer</span><span class="p">({</span>
<a href="#__codelineno-1-44" id="__codelineno-1-44" name="__codelineno-1-44"></a><span class="w">    </span><span class="nx">config</span><span class="o">:</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">getProperties</span><span class="p">(),</span>
<a href="#__codelineno-1-45" id="__codelineno-1-45" name="__codelineno-1-45"></a><span class="w">  </span><span class="p">});</span>
<a href="#__codelineno-1-46" id="__codelineno-1-46" name="__codelineno-1-46"></a>
<a href="#__codelineno-1-47" id="__codelineno-1-47" name="__codelineno-1-47"></a><span class="w">  </span><span class="c1">// start the API server here and you are ready to roll</span>
<a href="#__codelineno-1-48" id="__codelineno-1-48" name="__codelineno-1-48"></a><span class="p">};</span>
<a href="#__codelineno-1-49" id="__codelineno-1-49" name="__codelineno-1-49"></a>
<a href="#__codelineno-1-50" id="__codelineno-1-50" name="__codelineno-1-50"></a><span class="k">export</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">launchApp</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="err">\</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-1-51" id="__codelineno-1-51" name="__codelineno-1-51"></a><span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-1-52" id="__codelineno-1-52" name="__codelineno-1-52"></a><span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">main</span><span class="p">();</span>
<a href="#__codelineno-1-53" id="__codelineno-1-53" name="__codelineno-1-53"></a><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="err">\</span><span class="sb">`Cactus API server launched OK \`);</span>
<a href="#__codelineno-1-54" id="__codelineno-1-54" name="__codelineno-1-54"></a><span class="sb">  } catch (ex) {</span>
<a href="#__codelineno-1-55" id="__codelineno-1-55" name="__codelineno-1-55"></a><span class="sb">    log.error(\`Cactus API server crashed: \`, ex);</span>
<a href="#__codelineno-1-56" id="__codelineno-1-56" name="__codelineno-1-56"></a><span class="sb">    process.exit(1);</span>
<a href="#__codelineno-1-57" id="__codelineno-1-57" name="__codelineno-1-57"></a><span class="sb">  }</span>
<a href="#__codelineno-1-58" id="__codelineno-1-58" name="__codelineno-1-58"></a><span class="sb">}</span>
<a href="#__codelineno-1-59" id="__codelineno-1-59" name="__codelineno-1-59"></a>
<a href="#__codelineno-1-60" id="__codelineno-1-60" name="__codelineno-1-60"></a><span class="sb">if (require.main \=== module) {</span>
<a href="#__codelineno-1-61" id="__codelineno-1-61" name="__codelineno-1-61"></a><span class="sb">  launchApp();</span>
<a href="#__codelineno-1-62" id="__codelineno-1-62" name="__codelineno-1-62"></a><span class="sb">}</span>
</code></pre></div>
<h3 id="complete-example">Complete Example<a class="headerlink" href="#complete-example" title="Permanent link">¶</a></h3>
<p>For a complete example of how to use the API server, read all the code of the supply chain example’s backend package:</p>
<p><a href="https://github.com/hyperledger/cactus/tree/main/examples/cactus-example-supply-chain-backend/src/main/typescript">https://github.com/hyperledger/cactus/tree/main/examples/cactus-example-supply-chain-backend/src/main/typescript</a></p>
<h2 id="deployment-scenarios">Deployment Scenarios<a class="headerlink" href="#deployment-scenarios" title="Permanent link">¶</a></h2>
<p>There’s a set of building blocks (members, nodes, API server processes, plugin instances) that you can use when defining (founding) a consortium and these building blocks relate to each other in a way that can be expressed with an entity relationship diagram which can be seen below. The composability rules can be deducted from how the diagram elements (entities) are connected (related) to each other, e.g. the API server process can have any number of plugin instances in it and a node can contain any number of API server processes, and so on until the top level construct is reached: the consortium.</p>
<blockquote>
<p>Consortium management does not relate to achieving consensus on data/transactions involving individual ledgers, merely about consensus on the metadata of a consortium.</p>
</blockquote>
<p><img alt="deployment-entity-relationship-diagram.png" src="https://github.com/hyperledger/cactus/raw/4a337be719a9d2e2ccb877edccd7849f4be477ec/whitepaper/deployment-entity-relationship-diagram.png"/></p>
<p>Now, with these composability rules in mind, let us demonstrate a few different deployment scenarios (both expected and exotic ones) to showcase the framework’s flexibility in this regard.</p>
<h3 id="production-deployment-example">Production Deployment Example<a class="headerlink" href="#production-deployment-example" title="Permanent link">¶</a></h3>
<p>Many different configurations are possible here as well. One way to have two members form a consortium and both of those members provide highly available, high throughput services is to have a deployment as shown on the below figure. What is important to note here is that this consortium has 2 nodes, 1 for each member and it is irrelevant how many API servers those nodes have internally because they all respond to requests through the network host/web domain that is tied to the node. One could say that API servers do not have a distinguishable identity relative to their peer API servers, only the higher-level nodes do.</p>
<p><img alt="deployment-production-example.png" src="https://github.com/hyperledger/cactus/raw/4a337be719a9d2e2ccb877edccd7849f4be477ec/whitepaper/deployment-production-example.png"/></p>
<h3 id="low-resource-deployment-example">Low Resource Deployment Example<a class="headerlink" href="#low-resource-deployment-example" title="Permanent link">¶</a></h3>
<p>This is an example to showcase how you can pull up a full consortium even from within a single operating system process (API server) with multiple members and their respective nodes. It is not something that’s recommended for a production grade environment, ever, but it is great for demos and integration tests where you have to simulate a fully functioning consortium with as little hardware footprint as possible to save on time and cost.</p>
<p>The individual nodes/API servers are isolated by listening on separate TCP ports of the machine they are hosted on:</p>
<p><img alt="deployment-low-resource-example.png" src="https://github.com/hyperledger/cactus/raw/4a337be719a9d2e2ccb877edccd7849f4be477ec/whitepaper/deployment-low-resource-example.png"/></p>
<h2 id="containerization">Containerization<a class="headerlink" href="#containerization" title="Permanent link">¶</a></h2>
<h3 id="building-the-container-image-locally">Building the container image locally<a class="headerlink" href="#building-the-container-image-locally" title="Permanent link">¶</a></h3>
<p>In the Cactus project root say:</p>
<p>DOCKER_BUILDKIT=1 docker build -f ./packages/cactus-cmd-api-server/Dockerfile . -t cas -t cactus-api-server</p>
<p>Build with a specific version of the npm package:</p>
<p>DOCKER_BUILDKIT=1 docker build --build-arg NPM_PKG_VERSION=main -f ./packages/cactus-cmd-api-server/Dockerfile . -t cas -t cactus-api-server</p>
<h3 id="running-the-container-image-locally">Running the container image locally<a class="headerlink" href="#running-the-container-image-locally" title="Permanent link">¶</a></h3>
<p>Before running the examples here you need to build the image locally. See section <a href="#building-the-container-image-locally">Building the container image locally</a> for details on how to do that.</p>
<p>Once you’ve built the container, the following commands should work:</p>
<ul>
<li>
<p>Launch container - no plugins, default configuration</p>
<p>docker run \
  --rm \
  --publish 3000:3000 \
  --publish 4000:4000 \
  --env AUTHORIZATION_PROTOCOL='NONE' \
  --env AUTHORIZATION_CONFIG_JSON='{}' \
  --env GRPC_TLS_ENABLED=false \
  cas</p>
</li>
<li>
<p>Launch container with plugins of your choice (keychain, consortium connector, etc.)</p>
<p>docker run \
  --rm \
  --publish 3000:3000 \
  --publish 4000:4000 \
  --env AUTHORIZATION_PROTOCOL='NONE' \
  --env AUTHORIZATION_CONFIG_JSON='{}' \
  --env GRPC_TLS_ENABLED=false \
  cas \
    ./node_modules/.bin/cactusapi \
    --plugins='[{"packageName": "<a class="magiclink magiclink-github magiclink-repository" href="https://github.com/hyperledger/cactus-plugin-ledger-connector-fabric" title="GitHub Repository: hyperledger/cactus-plugin-ledger-connector-fabric">hyperledger/cactus-plugin-ledger-connector-fabric</a>", "type": "org.hyperledger.cactus.plugin_import_type.LOCAL", "action": "org.hyperledger.cactus.plugin_import_action.INSTALL",  "options": { "connectionProfile": {}, "instanceId": "some-unique-instance-id"}}]'</p>
</li>
<li>
<p>Launch container with plugin configuration as an <strong>environment variable</strong>:</p>
<p>docker run \
  --rm \
  --publish 3000:3000 \
  --publish 4000:4000 \
  --env AUTHORIZATION_PROTOCOL='NONE' \
  --env AUTHORIZATION_CONFIG_JSON='{}' \
  --env GRPC_TLS_ENABLED=false \
  --env PLUGINS='[{"packageName": "<a class="magiclink magiclink-github magiclink-repository" href="https://github.com/hyperledger/cactus-plugin-ledger-connector-besu" title="GitHub Repository: hyperledger/cactus-plugin-ledger-connector-besu">hyperledger/cactus-plugin-ledger-connector-besu</a>", "type": "org.hyperledger.cactus.plugin_import_type.LOCAL", "action": "org.hyperledger.cactus.plugin_import_action.INSTALL",  "options": {"rpcApiHttpHost": "<a href="http://localhost:8545">http://localhost:8545</a>", "instanceId": "some-unique-besu-connector-instance-id"}}]' \
  cas</p>
</li>
<li>
<p>Launch container with plugin configuration as a <strong>CLI argument</strong>:</p>
<p>docker run \
  --rm \
  --publish 3000:3000 \
  --publish 4000:4000 \
  --env AUTHORIZATION_PROTOCOL='NONE' \
  --env AUTHORIZATION_CONFIG_JSON='{}' \
  --env GRPC_TLS_ENABLED=false \
  cas \
    ./node_modules/.bin/cactusapi \
    --plugins='[{"packageName": "<a class="magiclink magiclink-github magiclink-repository" href="https://github.com/hyperledger/cactus-plugin-ledger-connector-besu" title="GitHub Repository: hyperledger/cactus-plugin-ledger-connector-besu">hyperledger/cactus-plugin-ledger-connector-besu</a>", "type": "org.hyperledger.cactus.plugin_import_type.LOCAL", "action": "org.hyperledger.cactus.plugin_import_action.INSTALL",  "options": {"rpcApiHttpHost": "<a href="http://localhost:8545">http://localhost:8545</a>", "instanceId": "some-unique-besu-connector-instance-id"}}]'</p>
</li>
<li>
<p>Launch container with <strong>configuration file</strong> mounted from host machine:</p>
<p>echo '[{"packageName": "<a class="magiclink magiclink-github magiclink-repository" href="https://github.com/hyperledger/cactus-plugin-ledger-connector-besu" title="GitHub Repository: hyperledger/cactus-plugin-ledger-connector-besu">hyperledger/cactus-plugin-ledger-connector-besu</a>", "type": "org.hyperledger.cactus.plugin_import_type.LOCAL", "action": "org.hyperledger.cactus.plugin_import_action.INSTALL",  "options": {"rpcApiHttpHost": "<a href="http://localhost:8545">http://localhost:8545</a>", "instanceId": "some-unique-besu-connector-instance-id"}}]' &gt; cactus.json</p>
<p>docker run \
  --rm \
  --publish 3000:3000 \
  --publish 4000:4000 \
  --env AUTHORIZATION_PROTOCOL='NONE' \
  --env AUTHORIZATION_CONFIG_JSON='{}' \
  --env GRPC_TLS_ENABLED=false \
  --mount type=bind,source="$(pwd)"/cactus.json,target=/cactus.json \
  cas \
    ./node_modules/.bin/cactusapi \
    --config-file=/cactus.json</p>
</li>
</ul>
<h3 id="testing-api-calls-with-the-container">Testing API calls with the container<a class="headerlink" href="#testing-api-calls-with-the-container" title="Permanent link">¶</a></h3>
<p>Don’t have a Besu network on hand to test with? Test or develop against our Besu All-In-One container!</p>
<ol>
<li>
<p>Terminal Window 1 (Ledger)</p>
<p>docker run --publish 8545:8545 hyperledger/cactus-besu-all-in-one:latest</p>
</li>
<li>
<p>Terminal Window 2 (Cactus API Server)</p>
<p>docker run \
  --network host \
  --rm \
  --publish 3000:3000 \
  --publish 4000:4000 \
  --env AUTHORIZATION_PROTOCOL='NONE' \
  --env AUTHORIZATION_CONFIG_JSON='{}' \
  --env GRPC_TLS_ENABLED=false \
  --env PLUGINS='[{"packageName": "<a class="magiclink magiclink-github magiclink-repository" href="https://github.com/hyperledger/cactus-plugin-ledger-connector-besu" title="GitHub Repository: hyperledger/cactus-plugin-ledger-connector-besu">hyperledger/cactus-plugin-ledger-connector-besu</a>", "type": "org.hyperledger.cactus.plugin_import_type.LOCAL", "action": "org.hyperledger.cactus.plugin_import_action.INSTALL",  "options": {"rpcApiHttpHost": "<a href="http://localhost:8545">http://localhost:8545</a>", "instanceId": "some-unique-besu-connector-instance-id"}}]' \
  cas</p>
</li>
<li>
<p>Terminal Window 3 (curl - replace eth accounts as needed)</p>
<p>curl --location --request POST '<a href="http://127.0.0.1:4000/api/v1/plugins/@hyperledger/cactus-plugin-ledger-connector-besu/run-transaction">http://127.0.0.1:4000/api/v1/plugins/@hyperledger/cactus-plugin-ledger-connector-besu/run-transaction</a>' \
--header 'Content-Type: application/json' \
--data-raw '{
    "web3SigningCredential": {
      "ethAccount": "627306090abaB3A6e1400e9345bC60c78a8BEf57",
      "secret": "c87509a1c067bbde78beb793e6fa76530b6382a4c0241e5e4a9ec0a0f44dc0d3",
      "type": "PRIVATE_KEY_HEX"
    },
    "consistencyStrategy": {
      "blockConfirmations": 0,
      "receiptType": "NODE_TX_POOL_ACK"
    },
    "transactionConfig": {
      "from": "627306090abaB3A6e1400e9345bC60c78a8BEf57",
      "to": "f17f52151EbEF6C7334FAD080c5704D77216b732",
      "value": 1,
      "gas": 10000000
    }
}'</p>
</li>
<li>
<p>The above should produce a response that looks similar to this:</p>
<p>{
    "success": true,
    "data": {
        "transactionReceipt": {
            "blockHash": "0x7c97c038a5d3bd84613fe23ed442695276d5d2df97f4e7c4f10ca06765033ffd",
            "blockNumber": 1218,
            "contractAddress": null,
            "cumulativeGasUsed": 21000,
            "from": "0x627306090abab3a6e1400e9345bc60c78a8bef57",
            "gasUsed": 21000,
            "logs": [],
            "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
            "status": true,
            "to": "0xf17f52151ebef6c7334fad080c5704d77216b732",
            "transactionHash": "0xc7fcb46c735bdc696d500bfc70c72595a2b8c31813929e5c61d9a5aec3376d6f",
            "transactionIndex": 0
        }
    }
}</p>
</li>
</ol>
<h2 id="prometheus-exporter">Prometheus Exporter<a class="headerlink" href="#prometheus-exporter" title="Permanent link">¶</a></h2>
<p>This class creates a prometheus exporter, which scrapes the total Cactus node count.</p>
<h3 id="usage-prometheus">Usage Prometheus<a class="headerlink" href="#usage-prometheus" title="Permanent link">¶</a></h3>
<p>The prometheus exporter object is initialized in the <code>ApiServer</code> class constructor itself, so instantiating the object of the <code>ApiServer</code> class, gives access to the exporter object. You can also initialize the prometheus exporter object separately and then pass it to the <code>IApiServerConstructorOptions</code> interface for <code>ApiServer</code> constructor.</p>
<p><code>getPrometheusMetricsV1</code> function returns the prometheus exporter metrics, currently displaying the total plugins imported, which currently refreshes to match the plugin count, everytime <code>setTotalPluginImports</code> method is called.</p>
<h3 id="prometheus-integration">Prometheus Integration<a class="headerlink" href="#prometheus-integration" title="Permanent link">¶</a></h3>
<p>To use Prometheus with this exporter make sure to install <a href="https://prometheus.io/download/">Prometheus main component</a>. Once Prometheus is setup, the corresponding scrape_config needs to be added to the prometheus.yml</p>
<p>- job_name: 'consortium_manual_exporter'
  metrics_path: /api/v1/api-server/get-prometheus-exporter-metrics
  scrape_interval: 5s
  static_configs:
    - targets: ['{host}:{port}']</p>
<p>Here the <code>host:port</code> is where the prometheus exporter metrics are exposed. The test cases (For example, packages/cactus-plugin-consortium-manual/src/test/typescript/unit/consortium/get-node-jws-endpoint-v1.test.ts) exposes it over <code>0.0.0.0</code> and a random port(). The random port can be found in the running logs of the test case and looks like (42379 in the below mentioned URL) <code>Metrics URL: http://0.0.0.0:42379/api/v1/api-server/get-prometheus-exporter-metrics/get-prometheus-exporter-metrics</code></p>
<p>Once edited, you can start the prometheus service by referencing the above edited prometheus.yml file. On the prometheus graphical interface (defaulted to <a href="http://localhost:9090">http://localhost:9090</a>), choose <strong>Graph</strong> from the menu bar, then select the <strong>Console</strong> tab. From the <strong>Insert metric at cursor</strong> drop down, select <strong>cactus_api_server_total_plugin_imports</strong> and click <strong>execute</strong></p>
<h3 id="shutdown-hook">Shutdown Hook<a class="headerlink" href="#shutdown-hook" title="Permanent link">¶</a></h3>
<p>The API config contains a flag:</p>
<div class="highlight"><pre><span></span><code>{
  "enableShutdownHook": true
}
</code></pre></div>
<p>This allows for graceful shutdown of the API server after a SIGINT via cli CTRL + C. This hook can be disabled by passing in false either via the TypeScript constructor or the JSON config file.</p>
<h3 id="helper-code">Helper code<a class="headerlink" href="#helper-code" title="Permanent link">¶</a></h3>
<h4 id="responsetypets">response.type.ts<a class="headerlink" href="#responsetypets" title="Permanent link">¶</a></h4>
<p>This file contains the various responses of the metrics.</p>
<h4 id="data-fetcherts">data-fetcher.ts<a class="headerlink" href="#data-fetcherts" title="Permanent link">¶</a></h4>
<p>This file contains functions encasing the logic to process the data points.</p>
<h4 id="metricsts">metrics.ts<a class="headerlink" href="#metricsts" title="Permanent link">¶</a></h4>
<p>This file lists all the prometheus metrics and what they are used for.</p>
<h2 id="faq">FAQ<a class="headerlink" href="#faq" title="Permanent link">¶</a></h2>
<h3 id="what-is-the-difference-between-a-cactus-node-and-a-cactus-api-server">What is the difference between a Cactus Node and a Cactus API Server?<a class="headerlink" href="#what-is-the-difference-between-a-cactus-node-and-a-cactus-api-server" title="Permanent link">¶</a></h3>
<p>The node is what has an identity within your PKI and can be made up of 1-N API server instances that all share the same configuration/identity of the node. See deployment scenarios above for a much more detailed explanation.</p>
<h3 id="is-the-api-server-horizontally-scalable">Is the API server horizontally scalable?<a class="headerlink" href="#is-the-api-server-horizontally-scalable" title="Permanent link">¶</a></h3>
<p><strong>Yes, 100%.</strong> Keep in mind though that the API server can be loaded up with arbitrary plugins meaning that if you write a plugin that has a central database that can only do 1 transaction per second, then it will not help you much that the API server itself is horizontally scalable because deploying a thousand instances of the API server will just result in you having a thousand instances of your plugin all waiting for that underlying database with its 1 TPS throughput hogging your system. When we say that the API server is horizontally scalable, we mean that the API server itself is designed not to have any such state mentioned in the example above. You are responsible for only deploying plugins in the API server that are horizontally scalable as well. In short, your whole system is only horizontally scalable if all components of it are horizontally scalable.</p>
<h3 id="does-the-api-server-automatically-protect-me-from-malicious-plugins">Does the API server automatically protect me from malicious plugins?<a class="headerlink" href="#does-the-api-server-automatically-protect-me-from-malicious-plugins" title="Permanent link">¶</a></h3>
<p><strong>No.</strong> If you install a third-party plugin that wasn’t vetted by anyone and that plugin happens to have malicious code in it to steal your private keys, it can do so. You are responsible for making sure that the plugins you install have no known security vulnerabilities or backdoors e.g. they are considered “secure”. The double quotes around “secure” is meant to signify the fact that no software is ever really truly secure, just merely lacking of known vulnerabilities at any given point in time.</p>
<h3 id="can-i-use-the-api-server-with-plugins-deployed-as-a-service">Can I use the API server with plugins deployed as a service?<a class="headerlink" href="#can-i-use-the-api-server-with-plugins-deployed-as-a-service" title="Permanent link">¶</a></h3>
<p><strong>Yes.</strong> You can deploy your plugin written in any language, anywhere as long as it is accessible over the network and does come with a Typescript API client that you can use to install into the API server as a proxy for an in-process plugin implementation.</p>
<p><a href="../cactus-api-client/" title="@hyperledger/cactus-api-client">Previous</a> <a href="../cactus-common/" title="@hyperledger/cactus-common">Next</a></p>
<hr/>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Api Client" class="md-footer__link md-footer__link--prev" href="../cactus-api-client/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                Api Client
              </div>
</div>
</a>
<a aria-label="Next: Cactus Common" class="md-footer__link md-footer__link--next" href="../cactus-common/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                Cactus Common
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © Hyperledger 2020-2023
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "navigation.expand", "navigation.footer", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "toc.follow", "toc.integrate"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
<script src="../../../assets/javascripts/bundle.83f73b43.min.js"></script>
<script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body>
</html>