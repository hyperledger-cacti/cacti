
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://hyperledger-cacti.github.io/cacti/weaver/getting-started/enabling-weaver-network/corda/" rel="canonical"/>
<link href="../fabric/" rel="prev"/>
<link href="../besu/" rel="next"/>
<link href="../../../../images/HL_Cacti_Logo_Colorreverse.svg" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.40" name="generator"/>
<title>Corda - Using and Developing with Hyperledger Cacti</title>
<link href="../../../../assets/stylesheets/main.8c3ca2c6.min.css" rel="stylesheet"/>
<link href="../../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
<script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#model">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
<aside class="md-banner md-banner--warning">
<div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../../../../..">
<strong>Click here to go to latest.</strong>
</a>
</div>
<script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
</aside>
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Using and Developing with Hyperledger Cacti" class="md-header__button md-logo" data-md-component="logo" href="../../../.." title="Using and Developing with Hyperledger Cacti">
<img alt="logo" src="../../../../images/HL_Cacti_Logo_Colorreverse.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Using and Developing with Hyperledger Cacti
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Corda
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/hyperledger/cacti" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    hyperledger/cacti
  </div>
</a>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../..">
        
  
    
  
  Introduction

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../vision/">
        
  
    
  
  Vision

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../architecture/">
        
  
    
  
  Architecture

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../concepts/data-sharing/">
          
  
  Key Concepts

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../use-cases/">
        
  
    
  
  Use Cases

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../cactus/introduction/">
          
  
  Cactus

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../../../introduction/">
          
  
  Weaver

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../guides/operations/">
          
  
  Guides

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../references/specs/">
          
  
  References

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../contributing/how-to-contribute/">
          
  
  Contributing

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../faqs/">
        
  
    
  
  FAQs

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../glossary/">
        
  
    
  
  Glossary

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../contact-us/">
        
  
    
  
  Contact Us

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../blog/2021-01-21-cross-chain-asset/">
          
  
  Blog

        </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Using and Developing with Hyperledger Cacti" class="md-nav__button md-logo" data-md-component="logo" href="../../../.." title="Using and Developing with Hyperledger Cacti">
<img alt="logo" src="../../../../images/HL_Cacti_Logo_Colorreverse.svg"/>
</a>
    Using and Developing with Hyperledger Cacti
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/hyperledger/cacti" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    hyperledger/cacti
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../..">
<span class="md-ellipsis">
    Introduction
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../vision/">
<span class="md-ellipsis">
    Vision
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../architecture/">
<span class="md-ellipsis">
    Architecture
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Key Concepts
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Key Concepts
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../concepts/data-sharing/">
<span class="md-ellipsis">
    Data Sharing
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../use-cases/">
<span class="md-ellipsis">
    Use Cases
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    Cactus
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Cactus
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/introduction/">
<span class="md-ellipsis">
    Introduction
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/build/">
<span class="md-ellipsis">
    Building
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
<span class="md-ellipsis">
    Examples
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_3">
<span class="md-nav__icon md-icon"></span>
            Examples
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/examples/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/examples/supply-chain-app/">
<span class="md-ellipsis">
    Supply Chain Application
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/governance/">
<span class="md-ellipsis">
    Governance
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/code-of-conduct/">
<span class="md-ellipsis">
    Code of Conduct
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/contributing/">
<span class="md-ellipsis">
    Contributing
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/whitepaper/">
<span class="md-ellipsis">
    Whitepaper
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/regulatory-and-industry-initiatives-reading-list/">
<span class="md-ellipsis">
    Regulatory and Industry Initiatives
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_9" id="__nav_6_9_label" tabindex="0">
<span class="md-ellipsis">
    Components
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_9">
<span class="md-nav__icon md-icon"></span>
            Components
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/packages/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/packages/cactus-api-client/">
<span class="md-ellipsis">
    Api Client
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/packages/cactus-cmd-api-server/">
<span class="md-ellipsis">
    CMD Api Server
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/packages/cactus-common/">
<span class="md-ellipsis">
    Cactus Common
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/packages/cactus-core/">
<span class="md-ellipsis">
    Cactus Core
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/packages/cactus-plugin-consortium-manual/">
<span class="md-ellipsis">
    Consortium Manual
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/packages/cactus-plugin-keychain-vault/">
<span class="md-ellipsis">
    Keychain Vault
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/packages/cactus-plugin-ledger-connector-besu/">
<span class="md-ellipsis">
    Connector Besu
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/packages/cactus-plugin-ledger-connector-corda/">
<span class="md-ellipsis">
    Connector Corda
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/packages/cactus-plugin-ledger-connector-fabric/">
<span class="md-ellipsis">
    Connector Fabric
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/packages/cactus-test-api-client/">
<span class="md-ellipsis">
    Test Api Client
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/packages/cactus-test-cmd-api-server/">
<span class="md-ellipsis">
    Test CMD Api Server
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/packages/cactus-test-tooling/">
<span class="md-ellipsis">
    Test Tooling
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_10" id="__nav_6_10_label" tabindex="0">
<span class="md-ellipsis">
    Ledger Browser
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_10_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_10">
<span class="md-nav__icon md-icon"></span>
            Ledger Browser
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/ledger-browser/overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/ledger-browser/setup/">
<span class="md-ellipsis">
    Setup
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6_10_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_10_3" id="__nav_6_10_3_label" tabindex="0">
<span class="md-ellipsis">
    Plugin Apps
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_10_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_6_10_3">
<span class="md-nav__icon md-icon"></span>
            Plugin Apps
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/ledger-browser/plugin-apps/app-patterns/">
<span class="md-ellipsis">
    App Patterns
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/ledger-browser/plugin-apps/ethereum-browser/">
<span class="md-ellipsis">
    Ethereum Browser
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/ledger-browser/plugin-apps/fabric-browser/">
<span class="md-ellipsis">
    Hyperledger Fabric Browser
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6_10_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_10_4" id="__nav_6_10_4_label" tabindex="0">
<span class="md-ellipsis">
    Developer Guide
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_10_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_6_10_4">
<span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/ledger-browser/developer-guide/overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/ledger-browser/developer-guide/architecture/">
<span class="md-ellipsis">
    Architecture
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/ledger-browser/developer-guide/tutorial/">
<span class="md-ellipsis">
    Tutorial
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_11" id="__nav_6_11_label" tabindex="0">
<span class="md-ellipsis">
    Ledger Support
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_11_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_11">
<span class="md-nav__icon md-icon"></span>
            Ledger Support
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/support/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/support/besu/">
<span class="md-ellipsis">
    Hyperledger Besu
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/support/corda/">
<span class="md-ellipsis">
    R3 Corda
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/support/fabric/">
<span class="md-ellipsis">
    Hyperledger Fabric
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/support/iroha.md">
<span class="md-ellipsis">
    Hyperledger Iroha
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../cactus/support/xdai/">
<span class="md-ellipsis">
    xDai
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
<span class="md-ellipsis">
    Weaver
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Weaver
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../introduction/">
<span class="md-ellipsis">
    Framework
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_7_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
<span class="md-ellipsis">
    Getting Started
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_7_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_2">
<span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../guide/">
<span class="md-ellipsis">
    Using Weaver
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_2_2" id="__nav_7_2_2_label" tabindex="0">
<span class="md-ellipsis">
    Launching a Test Network
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_2_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_2_2">
<span class="md-nav__icon md-icon"></span>
            Launching a Test Network
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../test-network/overview/">
<span class="md-ellipsis">
    Component Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../test-network/setup-local/">
<span class="md-ellipsis">
    Setup with Locally Built Weaver Components
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../test-network/setup-local-docker/">
<span class="md-ellipsis">
    Setup with Locally Built Dockerized Weaver Components
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../test-network/setup-packages/">
<span class="md-ellipsis">
    Setup with Imported Weaver Components
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../test-network/setup-packages-docker/">
<span class="md-ellipsis">
    Setup with Imported Dockerized Weaver Components
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../test-network/ledger-initialization/">
<span class="md-ellipsis">
    Ledger Initialization
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../test-network/advanced-configuration/">
<span class="md-ellipsis">
    Advanced Configuration
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_2_3" id="__nav_7_2_3_label" tabindex="0">
<span class="md-ellipsis">
    Testing Interoperation Modes
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_2_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_2_3">
<span class="md-nav__icon md-icon"></span>
            Testing Interoperation Modes
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../interop/overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../interop/data-sharing/">
<span class="md-ellipsis">
    Data Sharing
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_2_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_2_3_3" id="__nav_7_2_3_3_label" tabindex="0">
<span class="md-ellipsis">
    Asset Exchange
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_2_3_3_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_7_2_3_3">
<span class="md-nav__icon md-icon"></span>
            Asset Exchange
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../interop/asset-exchange/overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../interop/asset-exchange/fabric-fabric/">
<span class="md-ellipsis">
    Fabric with Fabric
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../interop/asset-exchange/fabric-corda/">
<span class="md-ellipsis">
    Fabric with Corda
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../interop/asset-exchange/fabric-besu/">
<span class="md-ellipsis">
    Fabric with Besu
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../interop/asset-exchange/corda-corda/">
<span class="md-ellipsis">
    Corda with Corda
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../interop/asset-exchange/corda-besu/">
<span class="md-ellipsis">
    Corda with Besu
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../interop/asset-exchange/besu-besu/">
<span class="md-ellipsis">
    Besu with Besu
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../interop/asset-transfer/">
<span class="md-ellipsis">
    Asset Transfer
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_7_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_2_4" id="__nav_7_2_4_label" tabindex="0">
<span class="md-ellipsis">
    Enabling Weaver in your Network and Application
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_7_2_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_2_4">
<span class="md-nav__icon md-icon"></span>
            Enabling Weaver in your Network and Application
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../fabric/">
<span class="md-ellipsis">
    Hyperledger Fabric
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    R3 Corda
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    R3 Corda
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#model">
<span class="md-ellipsis">
      Model
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#procedural-overview">
<span class="md-ellipsis">
      Procedural Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#development-phase">
<span class="md-ellipsis">
      Development Phase
    </span>
</a>
<nav aria-label="Development Phase" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#cordapp">
<span class="md-ellipsis">
      CorDapp
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#contracts-cordapp">
<span class="md-ellipsis">
      Contracts CorDapp
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#client-layer-applications">
<span class="md-ellipsis">
      Client Layer applications
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pre-configuration-phase">
<span class="md-ellipsis">
      Pre-Configuration Phase
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#startup-and-bootstrap-phase">
<span class="md-ellipsis">
      Startup and Bootstrap Phase
    </span>
</a>
<nav aria-label="Startup and Bootstrap Phase" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#for-asset-exchange_2">
<span class="md-ellipsis">
      For Asset Exchange
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#install-interoperation-cordapp-on-nodes">
<span class="md-ellipsis">
      Install Interoperation CorDapp on Nodes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#for-data-sharing-or-asset-transfer">
<span class="md-ellipsis">
      For Data Sharing or Asset Transfer
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../besu/">
<span class="md-ellipsis">
    Hyperledger Besu
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
<span class="md-ellipsis">
    What is Interoperability?
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_3">
<span class="md-nav__icon md-icon"></span>
            What is Interoperability?
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../what-is-interoperability/understanding-interoperability/">
<span class="md-ellipsis">
    Understanding Interoperability
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../what-is-interoperability/levels-of-interoperability/">
<span class="md-ellipsis">
    Levels of Interoperability
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../what-is-interoperability/integration-patterns/">
<span class="md-ellipsis">
    Integration Patterns
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../interoperability-modes/">
<span class="md-ellipsis">
    Interoperability Modes
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../design-principles/">
<span class="md-ellipsis">
    Design Principles
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_6" id="__nav_7_6_label" tabindex="0">
<span class="md-ellipsis">
    User Stories
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_6">
<span class="md-nav__icon md-icon"></span>
            User Stories
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../user-stories/overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../user-stories/global-trade/">
<span class="md-ellipsis">
    Global Trade
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../user-stories/financial-markets/">
<span class="md-ellipsis">
    DvP in Financial Markets
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../user-stories/legacy-integration/">
<span class="md-ellipsis">
    Legacy Integration
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_7" id="__nav_7_7_label" tabindex="0">
<span class="md-ellipsis">
    Architecture and Design
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_7">
<span class="md-nav__icon md-icon"></span>
            Architecture and Design
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../architecture-and-design/overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../architecture-and-design/relay/">
<span class="md-ellipsis">
    Relay
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../architecture-and-design/drivers/">
<span class="md-ellipsis">
    Drivers
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../architecture-and-design/weaver-dapps/">
<span class="md-ellipsis">
    Weaver DApps
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../architecture-and-design/decentralized-identity/">
<span class="md-ellipsis">
    Decentralized Identity
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_8" id="__nav_7_8_label" tabindex="0">
<span class="md-ellipsis">
    Security Model
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_8">
<span class="md-nav__icon md-icon"></span>
            Security Model
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security-model/authentication/">
<span class="md-ellipsis">
    Authentication
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security-model/access-control/">
<span class="md-ellipsis">
    Access Control
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security-model/proofs-and-verification/">
<span class="md-ellipsis">
    Proofs and Verification
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security-model/end-to-end-security/">
<span class="md-ellipsis">
    End-to-End Security
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_9" id="__nav_7_9_label" tabindex="0">
<span class="md-ellipsis">
    Deployment Considerations
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_9">
<span class="md-nav__icon md-icon"></span>
            Deployment Considerations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../deployment-considerations/deployment-patterns/">
<span class="md-ellipsis">
    Deployment Patterns
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../deployment-considerations/governance-and-policies/">
<span class="md-ellipsis">
    Governance and Policies
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../deployment-considerations/legal-and-regulation/">
<span class="md-ellipsis">
    Legal and Regulation
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../specifications/">
<span class="md-ellipsis">
    Specifications
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../roadmap/">
<span class="md-ellipsis">
    Roadmap
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../publications/">
<span class="md-ellipsis">
    Publications
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    Guides
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            Guides
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../guides/operations/">
<span class="md-ellipsis">
    Operations
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../guides/developers/">
<span class="md-ellipsis">
    Developers
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../guides/upgrading/">
<span class="md-ellipsis">
    Upgrading
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    References
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            References
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../references/specs/">
<span class="md-ellipsis">
    Technical Specifications
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../references/publications/">
<span class="md-ellipsis">
    Publications
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../references/events/">
<span class="md-ellipsis">
    Events and Podcasts
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../references/business/">
<span class="md-ellipsis">
    Business Usage
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../references/best-practices/">
<span class="md-ellipsis">
    Project Best Practices
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../references/github/">
<span class="md-ellipsis">
    GitHub Contributions
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../references/openapi/">
<span class="md-ellipsis">
    OpenAPI Specs
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-ellipsis">
    Contributing
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../contributing/how-to-contribute/">
<span class="md-ellipsis">
    How to Contribute
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../contributing/reporting-a-bug/">
<span class="md-ellipsis">
    Reporting a Bug
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../contributing/requesting-a-change/">
<span class="md-ellipsis">
    Requesting a Change
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../contributing/asking-a-question/">
<span class="md-ellipsis">
    Asking a Question
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../faqs/">
<span class="md-ellipsis">
    FAQs
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../glossary/">
<span class="md-ellipsis">
    Glossary
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../contact-us/">
<span class="md-ellipsis">
    Contact Us
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_14" type="checkbox"/>
<label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
<span class="md-ellipsis">
    Blog
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_14_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_14">
<span class="md-nav__icon md-icon"></span>
            Blog
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_14_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_14_1" id="__nav_14_1_label" tabindex="0">
<span class="md-ellipsis">
    January 21, 2021
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_14_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_14_1">
<span class="md-nav__icon md-icon"></span>
            January 21, 2021
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../blog/2021-01-21-cross-chain-asset/">
<span class="md-ellipsis">
    Enabling Cross-Chain Asset Exchange On Permissioned Blockchains
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../blog/2021-01-21-emergence-enterprise-interoperability/">
<span class="md-ellipsis">
    Emergence of Enterprise DLT Interoperability
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_14_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_14_2" id="__nav_14_2_label" tabindex="0">
<span class="md-ellipsis">
    November 07, 2022
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_14_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_14_2">
<span class="md-nav__icon md-icon"></span>
            November 07, 2022
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../blog/2022-11-07-introducing-hyperledger-cacti/">
<span class="md-ellipsis">
    Introducing Hyperledger Cacti, a multi-faceted pluggable interoperability framework
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_14_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_14_3" id="__nav_14_3_label" tabindex="0">
<span class="md-ellipsis">
    October 03, 2023
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_14_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_14_3">
<span class="md-nav__icon md-icon"></span>
            October 03, 2023
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../blog/2023-10-03-hyperledger-cacti-graduation/">
<span class="md-ellipsis">
    Hyperledger Cacti, A General-Purpose Modular Interoperability Framework, Moves to Graduated Status
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1>R3 Corda</h1>
<!--
 Copyright IBM Corp. All Rights Reserved.

 SPDX-License-Identifier: CC-BY-4.0
-->
<p>After testing the Weaver interoperation mechanisms on <a href="../../test-network/overview/">basic sample networks</a>, you may be interested in finding out how you can equip an existing real network, whether in development or in production, to exercise these mechanisms. In this document, we will demonstrate how to equip a Corda network and application with Weaver components and capabilities.</p>
<h2 id="model">Model<a class="headerlink" href="#model" title="Permanent link">¶</a></h2>
<p>The figure below illustrates a typical Corda network. The infrastructure consists of a set of nodes (each maintaining its share of the global state in a local vault), notaries, and CAs. On the nodes are installed one or more CorDapps, representing shared business logic across subsets of those nodes. The core of a CorDapp consists of a collection of workflows (or flows) and contracts acting on states; we layer the flows above the contracts in thebelow image just to illustrate that flows represent transaction (state update) triggers, and contract validations occur during the executions of flows. Further up in the stack lie client applications associated with CorDapps that can are used to trigger flows (and by implication, contracts).</p>
<p><img alt="alt text" src="../../../../images-weaver-docs/enabling-weaver/corda-network-model.png"/></p>
<p>Such a network equipped with Weaver components and capabilities will look like the figure below. Legacy components are marked in grey and Weaver and bridging components in green.</p>
<p><img alt="alt text" src="../../../../images-weaver-docs/enabling-weaver/corda-weaver-model.png"/></p>
<p>The relay and driver are the only additional infrastructure that need to be installed. One or more relays can be installed, as can one or more drivers. The drivers are illustrated in the client layer rather than in the bottom layer because, though they are coupled with relays, they trigger flows just like any client application does.</p>
<p>Existing CorDapp flows and contracts deployed on the network's nodes remain undisturbed. All that is required is the deployment of an Interoperation CorDapp (flows and contracts) on every node that needs to offer or consume state from foreign networks.</p>
<p>Client applications will need some additional code and configuration because the decisions to exercise interoperation mechanisms (relay queries for data sharing or atomic asset exchanges) are strictly part of business logic. But Weaver's Corda Interoperation Java-Kotlin SDK offers various helper functions to ease this process and keep the adaptation to a minimum, as we wil see later in this document. Finally, an <em>identity service</em> must be offered by the network to expose its CAs' certificate chains to foreign networks, thereby laying the basis for interoperation. This service simply needs to offer a REST endpoint, and can be implemented as a standalone application or (more conveniently) as an augmentation of one or more of the existing client layer applications.</p>
<h2 id="procedural-overview">Procedural Overview<a class="headerlink" href="#procedural-overview" title="Permanent link">¶</a></h2>
<p>A Corda network is typically created in phases, in the following sequence:</p>
<ol>
<li><strong>Development</strong>: This involves writing CorDapp which consists of contracts and workflows, and client layer applications. The cordapp's deployment name/ID and its transaction API must be designed first, but subsequent development of the two layers of applications can then proceed parallelly.</li>
<li><strong>Pre-Configuration</strong>: This involves creating a desired specification (as a set of configuration diles) of the network topology and the ledgers it maintains.</li>
<li><strong>Startup and Bootstrap</strong>: This is the launch phase, in which the network components and applications are started and bootstrapped (i.e., configured with initial state and operating rules).</li>
</ol>
<p>Assuming that the reader is familiar with this procedure, we will walk through the changes required in each phase to make your network ready for interoperation using Weaver components and code templates. This will involve code addition and adaptation, deployment of additional modules, additional configuration, and creation of additional ledger state records. The requirements and effort will vary with the mode of interoperation you wish to support in your Fabric network.</p>
<h2 id="development-phase">Development Phase<a class="headerlink" href="#development-phase" title="Permanent link">¶</a></h2>
<p>A Corda distributed application's business logic code spans three layers as illustrated in the network model:</p>
<h3 id="cordapp">CorDapp<a class="headerlink" href="#cordapp" title="Permanent link">¶</a></h3>
<p>CorDapps (Corda Distributed Applications) are distributed applications that run on the Corda platform. The goal of a CorDapp is to allow nodes to reach agreement on updates to the ledger. They achieve this goal by defining flows that Corda node owners can invoke over RPC.</p>
<h4 id="for-data-sharing">For Data Sharing<a class="headerlink" href="#for-data-sharing" title="Permanent link">¶</a></h4>
<p>No code changes are required for Weaver enablement, because data sharing involves:</p>
<ul>
<li>View packaging (and optionally, encryption) logic and access control logic in a source network, and</li>
<li>View validation logic in a destination network</li>
</ul>
<p>This logic is standard and independent of contract, workflow, and state, particulars. It is already implemented in the Interoperation CorDapp offered by Weaver. Hence you just need to deploy that CorDapp to exercise data sharing from, or to, your application CorDapp. Your application CorDapp can be oblivious of the Interoperation CorDapp's workings and of the view request-response protocol.</p>
<h4 id="for-asset-exchange">For Asset Exchange<a class="headerlink" href="#for-asset-exchange" title="Permanent link">¶</a></h4>
<p>To exchange an asset using Weaver, the asset's state on the ledger must be controlled in the following ways:</p>
<ul>
<li>Locked in favor of a party</li>
<li>Claimed by the party to whom the asset is pledged</li>
<li>Returned to the original owner if it is not claimed within a given timeframe</li>
</ul>
<p>In addition, the state of the asset (i.e., whether it is locked), and its current and targeted owners, must be determinable by looking at the ledger records.</p>
<p>The bookkeeping logic required to maintain records of locks can be abstracted away from the particulars of a digital asset and its workflow. But as such assets and their properties (including ownership) can be, and are, encoded in an arbitrary number of ways, we cannot provide a one-size-fits all set of functions (like in the data sharing protocol) to exchange any kind of asset. Instead, we must rely on the application CorDapp managing an asset, as it knows precisely what the asset's properties are and how they can be updated and queried on the ledger.</p>
<p>What Weaver offers, therefore, is the following:</p>
<ul>
<li>Lock management logic implemented in the Interoperation CorDapp that treats each asset as an abstract object (an instance of generic corda's <code>ContractState</code>) and is agnostic of the assets' internals. It consumes (burns) the asset state and creates a new <code>HTLC</code> state that indicates that the asset is locked, while in claim and unlock new asset state is created (minted) with appropriate owner while consuming <code>HTLC</code> state. This logic can be exercised in by installing Interoperation CorDapp on the nodes.</li>
<li>A set of template functions with sample (and extensible) code that must be added to the application CorDapp to augment the above lock management functions.</li>
</ul>
<p>Below, we list the template functions with sample code that you, as a developer, must use and adapt within your CorDapp.</p>
<ul>
<li>
<p><strong>Flow to get Asset State</strong>: For non-fungible assets, create a flow like:
  <div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">RetrieveStateAndRef</span><span class="p">(</span>
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">type</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span>
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span>
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="p">):</span><span class="w"> </span><span class="n">FlowLogic</span><span class="o">&lt;</span><span class="n">StateAndRef</span><span class="o">&lt;</span><span class="n">AssetState</span><span class="o">&gt;&gt;</span>
</code></pre></div>
  And for fungible assets, create a flow like:
  <div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">RetrieveStateAndRef</span><span class="p">(</span>
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">type</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span>
<a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">quantity</span><span class="p">:</span><span class="w"> </span><span class="kt">Long</span>
<a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="p">):</span><span class="w"> </span><span class="n">FlowLogic</span><span class="o">&lt;</span><span class="n">StateAndRef</span><span class="o">&lt;</span><span class="n">AssetState</span><span class="o">&gt;&gt;</span>
</code></pre></div>
  The name of these flows can be anything, but the parameters should be same, and return type should <code>StateAndRef</code>. These flows are supposed to get the <code>StateAndRef</code> object to the asset state that has to be locked, which can be identified by <code>type</code> and <code>id</code> for non-fungible assets, and <code>type</code> and <code>quantity</code> for fungible assets.</p>
</li>
<li>
<p><strong>Flow to update owner in asset state</strong>: Create a flow like:
  <div class="highlight"><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">UpdateOwnerFromPointer</span><span class="p">(</span>
<a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="nv">statePointer</span><span class="p">:</span><span class="w"> </span><span class="n">StaticPointer</span><span class="o">&lt;</span><span class="n">AssetState</span><span class="o">&gt;</span>
<a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">FlowLogic</span><span class="o">&lt;</span><span class="n">AssetState</span><span class="o">&gt;</span><span class="p">()</span>
</code></pre></div>
  Again the name can be anything but the function parameter should be same, i.e. take a <code>StaticPointer</code> and return the <code>ContractState</code> of the asset involved in asset exchange. This flow is supposed to resolve the <code>StaticPointer</code> to actual asset, and update the owner of this asset to the caller of this flow.</p>
</li>
</ul>
<h4 id="for-asset-transfer">For Asset Transfer<a class="headerlink" href="#for-asset-transfer" title="Permanent link">¶</a></h4>
<p><em>TBD</em></p>
<h3 id="contracts-cordapp">Contracts CorDapp<a class="headerlink" href="#contracts-cordapp" title="Permanent link">¶</a></h3>
<p>No code changes are required for Weaver enablement. For asset exchange, Weaver assumes that application CorDapp that manages assets must already have a asset creation (mint) contract command and asset deletion (burn) contract command, which can be invoked when <code>Issuer</code> party is involved in the transaction.</p>
<h2 id="client-layer-applications">Client Layer applications<a class="headerlink" href="#client-layer-applications" title="Permanent link">¶</a></h2>
<p>Weaver provides an SDK to help you adapt your applications to exercise the various interoperability modes. These are called out as <strong>SDK Helpers</strong> in the network model illustrated earlier. Your Corda network's Client layer applications have business logic embedded in them that, broadly speaking, accept data from users and other external agents and invoke workflows from CorDapp over RPC. When you use Weaver for network interoperability, other options can be added, namely requesting and accepting data from foreign networks, and triggering locks and claims for atomic exchanges spanning two networks. Weaver's Corda Interoperation SDK offers a library to exercise these options. But this will involve modification to the application's business logic.
To use Weaver's Corda SDK, you need to create a <a href="https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token">personal access token</a> with <code>read:packages</code> access in GitHub, to access Weaver packages.
You also need to add the following to your application's <code>build.gradle</code> file:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="n">repositories</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">  </span><span class="n">maven</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">      </span><span class="n">url</span><span class="w"> </span><span class="nl">https:</span><span class="c1">//maven.pkg.github.com/hyperledger/cacti</span>
<a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">      </span><span class="n">credentials</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">          </span><span class="n">username</span><span class="w"> </span><span class="o">&lt;</span><span class="n">github</span><span class="o">-</span><span class="n">email</span><span class="o">&gt;</span>
<a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">          </span><span class="n">password</span><span class="w"> </span><span class="o">&lt;</span><span class="n">github</span><span class="o">-</span><span class="n">personal</span><span class="o">-</span><span class="n">access</span><span class="o">-</span><span class="n">token</span><span class="o">&gt;</span>
<a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">      </span><span class="o">}</span>
<a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">  </span><span class="o">}</span>
<a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="o">}</span>
<a href="#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="n">dependencies</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-3-11" id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">  </span><span class="n">implementation</span><span class="o">(</span><span class="nl">group:</span><span class="w"> </span><span class="s1">'org.hyperledger.cacti.weaver.sdk.corda'</span><span class="o">,</span><span class="w"> </span><span class="nl">name:</span><span class="w"> </span><span class="s1">'weaver-sdk-corda'</span><span class="o">,</span><span class="w"> </span><span class="nl">version:</span><span class="w"> </span><span class="s2">"2.0.0-rc.2"</span><span class="o">)</span>
<a href="#__codelineno-3-12" id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">  </span><span class="n">implementation</span><span class="o">(</span><span class="nl">group:</span><span class="w"> </span><span class="s1">'org.hyperledger.cacti.weaver.imodule.corda'</span><span class="o">,</span><span class="w"> </span><span class="nl">name:</span><span class="w"> </span><span class="s1">'interop-contracts'</span><span class="o">,</span><span class="w"> </span><span class="nl">version:</span><span class="w"> </span><span class="s2">"2.0.0-rc.2"</span><span class="o">)</span>
<a href="#__codelineno-3-13" id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="w">  </span><span class="n">implementation</span><span class="o">(</span><span class="nl">group:</span><span class="w"> </span><span class="s1">'org.hyperledger.cacti.weaver.imodule.corda'</span><span class="o">,</span><span class="w"> </span><span class="nl">name:</span><span class="w"> </span><span class="s1">'interop-workflows'</span><span class="o">,</span><span class="w"> </span><span class="nl">version:</span><span class="w"> </span><span class="s2">"2.0.0-rc.2"</span><span class="o">)</span>
<a href="#__codelineno-3-14" id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="w">  </span><span class="n">implementation</span><span class="o">(</span><span class="nl">group:</span><span class="w"> </span><span class="s1">'org.hyperledger.cacti.weaver.protos'</span><span class="o">,</span><span class="w"> </span><span class="nl">name:</span><span class="w"> </span><span class="s1">'protos-java-kt'</span><span class="o">,</span><span class="w"> </span><span class="nl">version:</span><span class="w"> </span><span class="s2">"2.0.0-rc.2"</span><span class="o">)</span>
<a href="#__codelineno-3-15" id="__codelineno-3-15" name="__codelineno-3-15"></a><span class="o">}</span>
</code></pre></div>
(Or check out the <a href="https://github.com/hyperledger-cacti/cacti/packages/1856827">package website</a> and select a different version.)</p>
<h4 id="for-identity-administration">For Identity Administration<a class="headerlink" href="#for-identity-administration" title="Permanent link">¶</a></h4>
<p>A Corda network needs to share its security domain (or membership) configuration, i.e., its nodes' CA certificate chains, with a foreign network with which it seeks to interoperate. Though such sharing can be implemented using several different mechanisms, ranging from manual to automated, the simplest and most modular way is to expose a REST endpoint that agents in foreign networks can reach. Further, this REST endpoint can be implemented as a standalone web application or it can be an extension of one or more of the existing client layer applications. (Multiple apps can expose the same endpoint serving the same information for redundancy.) We will demonstrate an example of this while leaving other implementation modes to the user.
Let's say a Corda network consists of two nodes called <code>PartyA</code> and <code>PartyB</code>, each running a client layer application with a web server whose URL prefixes are <code>http://partya.mynetwork.com:9000</code> and <code>http://partyb.mynetwork.com:9000</code> respectively. Each app then can expose a REST endpoint (again, as an example) <code>http://partya.mynetwork.com:9000/node_sec_grp</code> and <code>http://partyb.mynetwork.com:9000/node_sec_grp</code> respectively.
At each web server's backend, you need to implement logic to retrieve the node's ID and it's associated certificated chains. Sample code is given below for a Kotlin implementation built on <code>weaver-sdk-corda</code>. You can use this code verbatim, except for some minor changes like <code>&lt;path-to-root-corda-net-folder&gt;</code>, other parameters like security domain, and list of names of nodes as appropriate for your environment:</p>
<p><div class="highlight"><pre><span></span><code><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">import</span><span class="w"> </span><span class="nn">org.hyperledger.cacti.weaver.sdk.corda.CredentialsCreator</span>
<a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="k">import</span><span class="w"> </span><span class="nn">com.google.protobuf.util.JsonFormat</span>
<a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>
<a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a>
<a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="nd">@RestController</span>
<a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="nd">@CrossOrigin</span>
<a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">"/"</span><span class="p">)</span><span class="w"> </span><span class="c1">// The paths for HTTP requests are relative to this base path.</span>
<a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="kd">class</span><span class="w"> </span><span class="nc">Controller</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">    </span><span class="c1">// Expose "node_sec_grp" endpoint using Rest Controller</span>
<a href="#__codelineno-4-10" id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s">"/node_sec_grp"</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arrayOf</span><span class="p">(</span><span class="n">RequestMethod</span><span class="p">.</span><span class="na">GET</span><span class="p">),</span><span class="w"> </span><span class="n">produces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arrayOf</span><span class="p">(</span><span class="s">"application/json"</span><span class="p">))</span>
<a href="#__codelineno-4-11" id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">GetNetworkConfig</span><span class="p">():</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-4-12" id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">jsonPrinter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonFormat</span><span class="p">.</span><span class="na">printer</span><span class="p">().</span><span class="na">includingDefaultValueFields</span><span class="p">()</span>
<a href="#__codelineno-4-13" id="__codelineno-4-13" name="__codelineno-4-13"></a>
<a href="#__codelineno-4-14" id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">credentialsCreator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CredentialsCreator</span><span class="p">(</span>
<a href="#__codelineno-4-15" id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="w">            </span><span class="s">"&lt;path-to-root-corda-net-folder&gt;/build/nodes"</span><span class="p">,</span>
<a href="#__codelineno-4-16" id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="w">            </span><span class="s">"mynetwork"</span><span class="p">,</span><span class="w"> </span><span class="c1">// security domain name</span>
<a href="#__codelineno-4-17" id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="w">            </span><span class="o">[</span><span class="s">"PartyA"</span><span class="p">,</span><span class="w"> </span><span class="s">"PartyB"</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="c1">// list of nodes </span>
<a href="#__codelineno-4-18" id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="w">            </span><span class="s">""</span><span class="p">,</span><span class="w"> </span>
<a href="#__codelineno-4-19" id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="w">            </span><span class="s">""</span>
<a href="#__codelineno-4-20" id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="w">        </span><span class="p">)</span>
<a href="#__codelineno-4-21" id="__codelineno-4-21" name="__codelineno-4-21"></a>
<a href="#__codelineno-4-22" id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="w">        </span><span class="c1">// Generate Membership</span>
<a href="#__codelineno-4-23" id="__codelineno-4-23" name="__codelineno-4-23"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">membership</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">credentialsCreator</span><span class="p">.</span><span class="na">createMembership</span><span class="p">()</span>
<a href="#__codelineno-4-24" id="__codelineno-4-24" name="__codelineno-4-24"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">jsonPrinter</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">membership</span><span class="p">)</span>
<a href="#__codelineno-4-25" id="__codelineno-4-25" name="__codelineno-4-25"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-4-26" id="__codelineno-4-26" name="__codelineno-4-26"></a><span class="p">}</span>
</code></pre></div>
An agent from a foreign network can query either <code>http://partya.mynetwork.com:9000/sec_group</code> or <code>http://partyb.mynetwork.com:9000/sec_group</code> and obtain the security domain (or membership) configuration of the entire network.</p>
<h4 id="for-data-sharing_1">For Data Sharing<a class="headerlink" href="#for-data-sharing_1" title="Permanent link">¶</a></h4>
<p>Consider a scenario inspired by the <a href="../../../user-stories/global-trade/">global trade use case</a> where a letter of credit (L/C) management business logic is installed in the <code>trade-finance-network</code> network, supports a flow named <code>UploadBillOfLading</code>, which validates and records a bill of lading (B/L) supplied by a user via a UI. Weaver will enable such a B/L to be fetched from a different network <code>trade-logistics-network</code> by querying the function <code>GetBillOfLading</code> exposed by the chaincode <code>shipmentcc</code> installed in the <code>tradelogisticschannel</code> channel (<em>The trade logistics network can be built on Corda as well. The steps for Weaver-enablement will mostly be the same, with the exception of view address creation logic. Here, for demonstration purposes, we assume that that counter-party network is built on Fabric</em>).</p>
<p>(In preparation, a suitable access control policy must be recorded on <code>tradelogisticschannel</code> in <code>trade-logistics-network</code>, and a suitable verification policy must be recorded in the vault of <code>trade-finance-network</code>. We will see how to do this in the <a href="#startup-and-bootstrap-weaver-components">Startup and Bootstrap Weaver Components</a> section later.)</p>
<p>You will need to insert some code in the client layer application that accepts a B/L and submits a <code>UploadBillOfLading</code> request in <code>trade-finance-network</code>. (No code changes need to be made in any application in the other network.) The logic to accept a B/L should be replaced (or you can simply add an alternative) by a call to the <code>InteroperableHelper.interopFlow</code> function offered by the <a href="https://github.com/hyperledger-cacti/cacti/packages/1856827">cacti-weaver-sdk-corda</a> library. The following code sample illustrates this:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>import org.hyperledger.cacti.weaver.sdk.corda.InteroperableHelper
<a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a>import com.mynetwork.flow.UploadBillOfLading
<a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>
<a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>val viewAddress = InteroperableHelper.createFabricViewAddress(
<a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>  'trade-logistics-network',               // Security Domain/Group
<a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a>  &lt;trade-logistics-relay-url[:&lt;port&gt;],     // Replace with remote network's relay
<a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a>  'tradelogisticschannel',                 // Remote network's channel
<a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a>  'shipmentcc',                            // Remote network's cc
<a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a>  'GetBillOfLading',                       // Remote network's cc Fun
<a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a>  [ &lt;shipment-reference&gt; ]                 // Replace &lt;shipment-reference&gt; with a value that can be used to look up the right B/L
<a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a>)
<a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a>try {
<a href="#__codelineno-5-13" id="__codelineno-5-13" name="__codelineno-5-13"></a>  val response = InteroperableHelper.interopFlow(
<a href="#__codelineno-5-14" id="__codelineno-5-14" name="__codelineno-5-14"></a>      proxy,                                // CordaRPCOps instance to start flows
<a href="#__codelineno-5-15" id="__codelineno-5-15" name="__codelineno-5-15"></a>      viewAddress,
<a href="#__codelineno-5-16" id="__codelineno-5-16" name="__codelineno-5-16"></a>      &lt;trade-finance-relay-url&gt;[:&lt;port&gt;]   // Replace with local network's relay address and port
<a href="#__codelineno-5-17" id="__codelineno-5-17" name="__codelineno-5-17"></a>  ).fold({
<a href="#__codelineno-5-18" id="__codelineno-5-18" name="__codelineno-5-18"></a>      println("Error in Interop Flow: ${it.message}")
<a href="#__codelineno-5-19" id="__codelineno-5-19" name="__codelineno-5-19"></a>  }, {
<a href="#__codelineno-5-20" id="__codelineno-5-20" name="__codelineno-5-20"></a>      val linearId = it.toString()
<a href="#__codelineno-5-21" id="__codelineno-5-21" name="__codelineno-5-21"></a>      val BoLString = InteroperableHelper.getExternalStatePayloadString(
<a href="#__codelineno-5-22" id="__codelineno-5-22" name="__codelineno-5-22"></a>          proxy,
<a href="#__codelineno-5-23" id="__codelineno-5-23" name="__codelineno-5-23"></a>          linearId
<a href="#__codelineno-5-24" id="__codelineno-5-24" name="__codelineno-5-24"></a>      )
<a href="#__codelineno-5-25" id="__codelineno-5-25" name="__codelineno-5-25"></a>      val result = proxy.startFlow(::UploadBillOfLading, BoLString)
<a href="#__codelineno-5-26" id="__codelineno-5-26" name="__codelineno-5-26"></a>      println("$result")
<a href="#__codelineno-5-27" id="__codelineno-5-27" name="__codelineno-5-27"></a>  }
<a href="#__codelineno-5-28" id="__codelineno-5-28" name="__codelineno-5-28"></a>} catch (e: Exception) {
<a href="#__codelineno-5-29" id="__codelineno-5-29" name="__codelineno-5-29"></a>  println("Error: ${e.toString()}")
<a href="#__codelineno-5-30" id="__codelineno-5-30" name="__codelineno-5-30"></a>}
</code></pre></div>
<p>Let us understand this code snippet better. The function <code>UploadBillOfLading</code> expects one argument, the bill of lading contents. The <code>InteroperableHelper.createFabricViewAddress</code> is used to create view address that is to passed to <code>InteroperableHelper.interopFlow</code> function. The equivalent function to create a view address for a remote Corda network is <code>InteroperableHelper.createCordaViewAddress</code>. </p>
<p>The rest of the code ought to be self-explanatory. Values are hardcoded for explanation purposes.</p>
<p><strong>Enabling TLS</strong>:
By default, the TLS is set to false in <code>interopFlow</code>, i.e. disabled. But if you want to enable TLS, can pass additional parameters to the <code>interopFlow</code> function as follows:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a>val response = InteroperableHelper.interopFlow(
<a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>    proxy,                                // CordaRPCOps instance to start flows
<a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>    viewAddress,
<a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>    &lt;trade-finance-relay-url&gt;[:&lt;port&gt;],   // Replace with local network's relay address and port
<a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>    'trade-finance-network',              // Local network name (destination)
<a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>    true,                                 // Boolean indication TLS is enabled.
<a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>    &lt;relayTlsTrustStorePath&gt;              // JKS file path containing relay server TLS CA certificates
<a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>    &lt;relayTlsTrustStorePassword&gt;,         // password used to create the JKS file
<a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a>)
</code></pre></div>
OR
<div class="highlight"><pre><span></span><code><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a>val response = InteroperableHelper.interopFlow(
<a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a>    proxy,                                // CordaRPCOps instance to start flows
<a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a>    viewAddress,
<a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a>    &lt;trade-finance-relay-url&gt;[:&lt;port&gt;],   // Replace with local network's relay address and port
<a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a>    'trade-finance-network',              // Local network name (destination)
<a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a>    true,                                 // Boolean indication TLS is enabled.
<a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a>    &lt;tlsCACertPathsForRelay&gt;,             // colon-separated list of CA certificate file paths
<a href="#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a>)
</code></pre></div></p>
<h4 id="for-asset-exchange_1">For Asset exchange<a class="headerlink" href="#for-asset-exchange_1" title="Permanent link">¶</a></h4>
<p>Let's take an example of asset exchange between <code>Alice</code> and <code>Bob</code>, where Bob wants to purchase an asset of type <code>Gold</code> with id <code>A123</code> from <code>Alice</code> in <code>BondNetwork</code> in exchange for <code>200</code> tokens of type <code>CBDC01</code> in <code>TokenNetwork</code>.</p>
<p><code>Alice</code> needs to select a secret text (say <code>s</code>), and hash it (say <code>H</code>) using say <code>SHA512</code>, which will be used to lock her asset in <code>BondNetwork</code>. To lock the non-fungible asset using hash <code>H</code> and timeout duration of 10 minutes, you need to add following code snippet in your application:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="k">import</span><span class="w"> </span><span class="nn">org.hyperledger.cacti.weaver.sdk.corda.AssetManager</span>
<a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="k">import</span><span class="w"> </span><span class="nn">org.hyperledger.cacti.weaver.sdk.corda.HashFunctions</span>
<a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a>
<a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="kd">var</span><span class="w"> </span><span class="nv">hash</span><span class="p">:</span><span class="w"> </span><span class="n">HashFunctions</span><span class="p">.</span><span class="na">Hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HashFunctions</span><span class="p">.</span><span class="na">SHA512</span>
<a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="n">hash</span><span class="p">.</span><span class="na">setSerializedHashBase64</span><span class="p">(</span><span class="n">H</span><span class="p">)</span>
<a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="kd">val</span><span class="w"> </span><span class="nv">proxy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">CordaRPCOps</span><span class="o">-</span><span class="n">instance</span><span class="o">-</span><span class="n">created</span><span class="o">-</span><span class="n">using</span><span class="o">-</span><span class="n">credentials</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">Alice</span><span class="o">-</span><span class="k">in</span><span class="o">-</span><span class="n">BondNetwork</span><span class="o">&gt;</span>
<a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="kd">val</span><span class="w"> </span><span class="nv">issuer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Issuer</span><span class="o">-</span><span class="n">party</span><span class="o">-</span><span class="k">in</span><span class="o">-</span><span class="n">BondNetwork</span><span class="o">&gt;</span>
<a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="kd">val</span><span class="w"> </span><span class="nv">recipient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Bob</span><span class="o">-</span><span class="n">party</span><span class="o">-</span><span class="k">in</span><span class="o">-</span><span class="n">BondNetwork</span><span class="o">&gt;</span>
<a href="#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="kd">val</span><span class="w"> </span><span class="nv">contractId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AssetManager</span><span class="p">.</span><span class="na">createHTLC</span><span class="p">(</span>
<a href="#__codelineno-8-10" id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="w">  </span><span class="n">proxy</span><span class="p">,</span><span class="w">          </span>
<a href="#__codelineno-8-11" id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="w">  </span><span class="s">"Gold"</span><span class="p">,</span><span class="w">         </span><span class="c1">// Type</span>
<a href="#__codelineno-8-12" id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="w">  </span><span class="s">"A123"</span><span class="p">,</span><span class="w">         </span><span class="c1">// ID</span>
<a href="#__codelineno-8-13" id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="w">  </span><span class="n">recipient</span><span class="p">,</span><span class="w"> </span>
<a href="#__codelineno-8-14" id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="w">  </span><span class="n">hash</span><span class="p">,</span><span class="w">           </span>
<a href="#__codelineno-8-15" id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="w">  </span><span class="m">10L</span><span class="p">,</span><span class="w">            </span><span class="c1">// Duration tmeout in secs, L denotes Long</span>
<a href="#__codelineno-8-16" id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="w">  </span><span class="m">1</span><span class="p">,</span><span class="w">              </span><span class="c1">// 1 if timeout is Duration, 0 if timeout is in absolute epochs</span>
<a href="#__codelineno-8-17" id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="w">  </span><span class="s">"com.cordaSimpleApplication.flow.RetrieveStateAndRef"</span><span class="p">,</span><span class="w"> </span><span class="c1">// full name of "Flow to get Asset State"</span>
<a href="#__codelineno-8-18" id="__codelineno-8-18" name="__codelineno-8-18"></a><span class="w">  </span><span class="n">AssetContract</span><span class="p">.</span><span class="na">Commands</span><span class="p">.</span><span class="na">Delete</span><span class="p">(),</span><span class="w">  </span><span class="c1">// Contract command for Asset to Burn/Delete the state</span>
<a href="#__codelineno-8-19" id="__codelineno-8-19" name="__codelineno-8-19"></a><span class="w">  </span><span class="n">issuer</span><span class="p">,</span>
<a href="#__codelineno-8-20" id="__codelineno-8-20" name="__codelineno-8-20"></a><span class="w">  </span><span class="n">observers</span><span class="w">       </span><span class="c1">// Optional parameter for list of observers for this transaction</span>
<a href="#__codelineno-8-21" id="__codelineno-8-21" name="__codelineno-8-21"></a><span class="p">)</span>
</code></pre></div></p>
<p>Now <code>Bob</code> will lock his tokens in <code>TokenNetwork</code>. To lock the fungible asset using same hash <code>H</code> and timeout of 5 minutes (half the timeout duration used by Alice in <code>BondNetwork</code>), add following code snippet in your application:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">import</span><span class="w"> </span><span class="nn">org.hyperledger.cacti.weaver.sdk.corda.AssetManager</span>
<a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="k">import</span><span class="w"> </span><span class="nn">org.hyperledger.cacti.weaver.sdk.corda.HashFunctions</span>
<a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a>
<a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="kd">var</span><span class="w"> </span><span class="nv">hash</span><span class="p">:</span><span class="w"> </span><span class="n">HashFunctions</span><span class="p">.</span><span class="na">Hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HashFunctions</span><span class="p">.</span><span class="na">SHA512</span>
<a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="n">hash</span><span class="p">.</span><span class="na">setSerializedHashBase64</span><span class="p">(</span><span class="n">H</span><span class="p">)</span>
<a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="kd">val</span><span class="w"> </span><span class="nv">proxy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">CordaRPCOps</span><span class="o">-</span><span class="n">instance</span><span class="o">-</span><span class="n">created</span><span class="o">-</span><span class="n">using</span><span class="o">-</span><span class="n">credentials</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">Bob</span><span class="o">-</span><span class="k">in</span><span class="o">-</span><span class="n">TokenNetwork</span><span class="o">&gt;</span>
<a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="kd">val</span><span class="w"> </span><span class="nv">issuer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Issuer</span><span class="o">-</span><span class="n">party</span><span class="o">-</span><span class="k">in</span><span class="o">-</span><span class="n">TokenNetwork</span><span class="o">&gt;</span>
<a href="#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="kd">val</span><span class="w"> </span><span class="nv">recipient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Alice</span><span class="o">-</span><span class="n">party</span><span class="o">-</span><span class="k">in</span><span class="o">-</span><span class="n">TokenNetwork</span><span class="o">&gt;</span>
<a href="#__codelineno-9-9" id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="kd">val</span><span class="w"> </span><span class="nv">contractId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AssetManager</span><span class="p">.</span><span class="na">createFungibleHTLC</span><span class="p">(</span>
<a href="#__codelineno-9-10" id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">  </span><span class="n">proxy</span><span class="p">,</span><span class="w">          </span>
<a href="#__codelineno-9-11" id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="w">  </span><span class="s">"CBDC01"</span><span class="p">,</span><span class="w">       </span><span class="c1">// Type</span>
<a href="#__codelineno-9-12" id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="w">  </span><span class="s">"200"</span><span class="p">,</span><span class="w">          </span><span class="c1">// Quantity</span>
<a href="#__codelineno-9-13" id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="w">  </span><span class="n">recipient</span><span class="p">,</span><span class="w"> </span>
<a href="#__codelineno-9-14" id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="w">  </span><span class="n">hash</span><span class="p">,</span><span class="w">           </span>
<a href="#__codelineno-9-15" id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="w">  </span><span class="m">5L</span><span class="p">,</span><span class="w">             </span><span class="c1">// Duration timeout in secs, L denotes Long</span>
<a href="#__codelineno-9-16" id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="w">  </span><span class="m">1</span><span class="p">,</span><span class="w">              </span><span class="c1">// 1 if timeout is Duration, 0 if timeout is in absolute epochs</span>
<a href="#__codelineno-9-17" id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="w">  </span><span class="s">"com.cordaSimpleApplication.flow.RetrieveStateAndRef"</span><span class="p">,</span><span class="w"> </span><span class="c1">// full name of "Flow to get Asset State"</span>
<a href="#__codelineno-9-18" id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="w">  </span><span class="n">AssetContract</span><span class="p">.</span><span class="na">Commands</span><span class="p">.</span><span class="na">Delete</span><span class="p">(),</span><span class="w">  </span><span class="c1">// Contract command for Asset to Burn/Delete the state</span>
<a href="#__codelineno-9-19" id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="w">  </span><span class="n">issuer</span><span class="p">,</span>
<a href="#__codelineno-9-20" id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="w">  </span><span class="n">observers</span><span class="w">       </span><span class="c1">// Optional parameter for list of observers for this transaction</span>
<a href="#__codelineno-9-21" id="__codelineno-9-21" name="__codelineno-9-21"></a><span class="p">)</span>
</code></pre></div></p>
<p>The above locks will return <code>contractId</code>, that has to be stored and will be used in other HTLC functions.</p>
<p>To query whether the assets are locked or not in any network, use following query function:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">isLockedBoolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AssetManager</span><span class="p">.</span><span class="na">isAssetLockedInHTLC</span><span class="p">(</span>
<a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">  </span><span class="n">rpc</span><span class="p">.</span><span class="na">proxy</span><span class="p">,</span><span class="w"> </span>
<a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">  </span><span class="n">contractId</span>
<a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="p">)</span>
</code></pre></div></p>
<p>Now to claim the asset using the secret text (pre-image of hash) <code>s</code>, add following code snippet:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kd">var</span><span class="w"> </span><span class="nv">hash</span><span class="p">:</span><span class="w"> </span><span class="n">HashFunctions</span><span class="p">.</span><span class="na">Hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HashFunctions</span><span class="p">.</span><span class="na">SHA512</span><span class="p">()</span>
<a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="n">hash</span><span class="p">.</span><span class="na">setPreimage</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="kd">val</span><span class="w"> </span><span class="nv">issuer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Issuer</span><span class="o">-</span><span class="n">party</span><span class="o">&gt;</span>
<a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="kd">val</span><span class="w"> </span><span class="nv">proxu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">CordaRPCOps</span><span class="o">-</span><span class="n">instance</span><span class="o">-</span><span class="n">created</span><span class="o">-</span><span class="n">using</span><span class="o">-</span><span class="n">credentials</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">claiming</span><span class="o">-</span><span class="n">party</span><span class="o">&gt;</span>
<a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="kd">val</span><span class="w"> </span><span class="nv">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AssetManager</span><span class="p">.</span><span class="na">claimAssetInHTLC</span><span class="p">(</span>
<a href="#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">  </span><span class="n">proxy</span><span class="p">,</span><span class="w"> </span>
<a href="#__codelineno-11-7" id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">  </span><span class="n">contractId</span><span class="p">,</span><span class="w">                       </span><span class="c1">// ContractId obtained during lock</span>
<a href="#__codelineno-11-8" id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">  </span><span class="n">hash</span><span class="p">,</span>
<a href="#__codelineno-11-9" id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">  </span><span class="n">AssetContract</span><span class="p">.</span><span class="na">Commands</span><span class="p">.</span><span class="na">Issue</span><span class="p">(),</span><span class="w">   </span><span class="c1">// Contract command for issuing/minting asset</span>
<a href="#__codelineno-11-10" id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">  </span><span class="s">"com.cordaSimpleApplication.flow.UpdateAssetOwnerFromPointer"</span><span class="p">,</span><span class="w"> </span><span class="c1">// full name of flow to update owner in asset state</span>
<a href="#__codelineno-11-11" id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="w">  </span><span class="n">issuer</span><span class="p">,</span>
<a href="#__codelineno-11-12" id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="w">  </span><span class="n">observers</span><span class="w">                         </span><span class="c1">// Optional parameter for list of observers for this transaction</span>
<a href="#__codelineno-11-13" id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="p">)</span><span class="w">   </span>
<a href="#__codelineno-11-14" id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="c1">// return value is boolean indicating success or failure of claim </span>
</code></pre></div>
The above function can be adapted to both <code>BondNetwork</code> and <code>TokenNetwork</code>.</p>
<p>If the asset has to be unlocked, use following code snippet:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">issuer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Issuer</span><span class="o">-</span><span class="n">party</span><span class="o">&gt;</span>
<a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="kd">val</span><span class="w"> </span><span class="nv">proxu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">CordaRPCOps</span><span class="o">-</span><span class="n">instance</span><span class="o">-</span><span class="n">created</span><span class="o">-</span><span class="n">using</span><span class="o">-</span><span class="n">credentials</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">locking</span><span class="o">-</span><span class="n">party</span><span class="o">&gt;</span>
<a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="kd">val</span><span class="w"> </span><span class="nv">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AssetManager</span><span class="p">.</span><span class="na">reclaimAssetInHTLC</span><span class="p">(</span>
<a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">  </span><span class="n">rpc</span><span class="p">.</span><span class="na">proxy</span><span class="p">,</span><span class="w"> </span>
<a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">  </span><span class="n">contractId</span><span class="p">,</span><span class="w">                       </span><span class="c1">// ContractId obtained during lock</span>
<a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">  </span><span class="n">AssetContract</span><span class="p">.</span><span class="na">Commands</span><span class="p">.</span><span class="na">Issue</span><span class="p">(),</span><span class="w">   </span><span class="c1">// Contract command for issuing/minting asset</span>
<a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">  </span><span class="n">issuer</span><span class="p">,</span>
<a href="#__codelineno-12-8" id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">  </span><span class="n">observers</span><span class="w">                         </span><span class="c1">// Optional parameter for list of observers for this transaction</span>
<a href="#__codelineno-12-9" id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="p">)</span><span class="w"> </span>
<a href="#__codelineno-12-10" id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="c1">// return value is boolean indicating success or failure of claim </span>
</code></pre></div></p>
<h4 id="for-asset-transfer_1">For Asset Transfer<a class="headerlink" href="#for-asset-transfer_1" title="Permanent link">¶</a></h4>
<p><em>TBD</em></p>
<h2 id="pre-configuration-phase">Pre-Configuration Phase<a class="headerlink" href="#pre-configuration-phase" title="Permanent link">¶</a></h2>
<p>No changes are required in your network's pre-configuration process for Weaver enablement.</p>
<p>Typically, pre-configuration involves:</p>
<ul>
<li>
<p>Generating node folders for each participating node in the network, which contains CorDapps, certificates,  persistence db, etc sub directories. Using Gradle task <code>net.corda.plugins.Cordform</code> or <code>net.corda.plugins.Dockerform</code>, the folders get created under the directory <code>build/nodes</code> (this path is used in above sample code for Identity Service).</p>
</li>
<li>
<p>The RPC address, username and password specified in above task will be used to create an instance of <code>CordaRPCOps</code>, which is the first argument for most <code>weaver-sdk-corda</code> static functions as we saw in previous section. For example, one of them is <code>InteroperableHelper.interopFlow</code>:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InteroperableHelper</span><span class="p">.</span><span class="na">interopFlow</span><span class="p">(</span>
<a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">    </span><span class="n">proxy</span><span class="p">,</span><span class="w">                                </span><span class="c1">// CordaRPCOps instance to start flows</span>
<a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">    </span><span class="n">viewAddress</span><span class="p">,</span>
<a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">trade</span><span class="o">-</span><span class="n">finance</span><span class="o">-</span><span class="n">relay</span><span class="o">-</span><span class="n">url</span><span class="o">&gt;[</span><span class="p">:</span><span class="o">&lt;</span><span class="n">port</span><span class="o">&gt;]</span><span class="p">,</span><span class="w">   </span><span class="c1">// Replace with local network's relay address and port</span>
<a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="p">)</span>
</code></pre></div>
Also, the Corda Driver (which we will setup in the following sections) needs a specific RPC user to be created, so make sure to add that in the Gradle task above, and note the credentials.</p>
</li>
<li>
<p>Sample <code>net.corda.plugins.Dockerform</code> task:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="n">task</span><span class="w"> </span><span class="nf">prepareDockerNodes</span><span class="o">(</span><span class="nl">type:</span><span class="w"> </span><span class="n">net</span><span class="o">.</span><span class="na">corda</span><span class="o">.</span><span class="na">plugins</span><span class="o">.</span><span class="na">Dockerform</span><span class="o">,</span><span class="w"> </span><span class="nl">dependsOn:</span><span class="w"> </span><span class="o">[</span><span class="s1">'jar'</span><span class="o">])</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">    </span><span class="kt">def</span><span class="w"> </span><span class="n">HOST_ADDRESS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0.0.0.0"</span>
<a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">    </span><span class="n">nodeDefaults</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">        </span><span class="n">projectCordapp</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">            </span><span class="n">deploy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="w">        </span><span class="o">}</span>
<a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">    </span><span class="o">}</span>
<a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">    </span><span class="n">node</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-14-9" id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="w">        </span><span class="n">name</span><span class="w"> </span><span class="s2">"O=Notary,L=London,C=GB"</span>
<a href="#__codelineno-14-10" id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="w">        </span><span class="n">notary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">validating</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="o">]</span>
<a href="#__codelineno-14-11" id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="w">        </span><span class="n">p2pPort</span><span class="w"> </span><span class="mi">10004</span>
<a href="#__codelineno-14-12" id="__codelineno-14-12" name="__codelineno-14-12"></a><span class="w">        </span><span class="n">rpcSettings</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-14-13" id="__codelineno-14-13" name="__codelineno-14-13"></a><span class="w">            </span><span class="n">address</span><span class="o">(</span><span class="s2">"$HOST_ADDRESS:10003"</span><span class="o">)</span>
<a href="#__codelineno-14-14" id="__codelineno-14-14" name="__codelineno-14-14"></a><span class="w">            </span><span class="n">adminAddress</span><span class="o">(</span><span class="s2">"$HOST_ADDRESS:10005"</span><span class="o">)</span>
<a href="#__codelineno-14-15" id="__codelineno-14-15" name="__codelineno-14-15"></a><span class="w">        </span><span class="o">}</span>
<a href="#__codelineno-14-16" id="__codelineno-14-16" name="__codelineno-14-16"></a><span class="w">        </span><span class="n">cordapps</span><span class="o">.</span><span class="na">clear</span><span class="o">()</span>
<a href="#__codelineno-14-17" id="__codelineno-14-17" name="__codelineno-14-17"></a><span class="w">    </span><span class="o">}</span>
<a href="#__codelineno-14-18" id="__codelineno-14-18" name="__codelineno-14-18"></a><span class="w">    </span><span class="n">node</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-14-19" id="__codelineno-14-19" name="__codelineno-14-19"></a><span class="w">        </span><span class="n">name</span><span class="w"> </span><span class="s2">"O=PartyA,L=London,C=GB"</span>
<a href="#__codelineno-14-20" id="__codelineno-14-20" name="__codelineno-14-20"></a><span class="w">        </span><span class="n">p2pPort</span><span class="w"> </span><span class="mi">10007</span>
<a href="#__codelineno-14-21" id="__codelineno-14-21" name="__codelineno-14-21"></a><span class="w">        </span><span class="n">rpcSettings</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-14-22" id="__codelineno-14-22" name="__codelineno-14-22"></a><span class="w">            </span><span class="n">address</span><span class="o">(</span><span class="s2">"$HOST_ADDRESS:10003"</span><span class="o">)</span>
<a href="#__codelineno-14-23" id="__codelineno-14-23" name="__codelineno-14-23"></a><span class="w">            </span><span class="n">adminAddress</span><span class="o">(</span><span class="s2">"$HOST_ADDRESS:10005"</span><span class="o">)</span>
<a href="#__codelineno-14-24" id="__codelineno-14-24" name="__codelineno-14-24"></a><span class="w">        </span><span class="o">}</span>
<a href="#__codelineno-14-25" id="__codelineno-14-25" name="__codelineno-14-25"></a><span class="w">        </span><span class="n">rpcUsers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span>
<a href="#__codelineno-14-26" id="__codelineno-14-26" name="__codelineno-14-26"></a><span class="w">                </span><span class="o">[</span><span class="w"> </span><span class="nl">user:</span><span class="w"> </span><span class="s2">"user1"</span><span class="o">,</span><span class="w"> </span><span class="s2">"password"</span><span class="o">:</span><span class="w"> </span><span class="s2">"test"</span><span class="o">,</span><span class="w"> </span><span class="s2">"permissions"</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="s2">"ALL"</span><span class="o">]],</span>
<a href="#__codelineno-14-27" id="__codelineno-14-27" name="__codelineno-14-27"></a><span class="w">                </span><span class="o">[</span><span class="w"> </span><span class="nl">user:</span><span class="w"> </span><span class="s2">"driverUser1"</span><span class="o">,</span><span class="w"> </span><span class="s2">"password"</span><span class="o">:</span><span class="w"> </span><span class="s2">"test"</span><span class="o">,</span><span class="w"> </span><span class="s2">"permissions"</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="s2">"ALL"</span><span class="o">]]]</span><span class="w"> </span><span class="c1">// &lt;-- Driver RPC User</span>
<a href="#__codelineno-14-28" id="__codelineno-14-28" name="__codelineno-14-28"></a><span class="w">    </span><span class="o">}</span>
<a href="#__codelineno-14-29" id="__codelineno-14-29" name="__codelineno-14-29"></a><span class="w">    </span><span class="n">node</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-14-30" id="__codelineno-14-30" name="__codelineno-14-30"></a><span class="w">        </span><span class="n">name</span><span class="w"> </span><span class="s2">"O=PartyB,L=London,C=GB"</span>
<a href="#__codelineno-14-31" id="__codelineno-14-31" name="__codelineno-14-31"></a><span class="w">        </span><span class="n">p2pPort</span><span class="w"> </span><span class="mi">10009</span>
<a href="#__codelineno-14-32" id="__codelineno-14-32" name="__codelineno-14-32"></a><span class="w">        </span><span class="n">rpcSettings</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-14-33" id="__codelineno-14-33" name="__codelineno-14-33"></a><span class="w">            </span><span class="n">address</span><span class="o">(</span><span class="s2">"$HOST_ADDRESS:10003"</span><span class="o">)</span>
<a href="#__codelineno-14-34" id="__codelineno-14-34" name="__codelineno-14-34"></a><span class="w">            </span><span class="n">adminAddress</span><span class="o">(</span><span class="s2">"$HOST_ADDRESS:10005"</span><span class="o">)</span>
<a href="#__codelineno-14-35" id="__codelineno-14-35" name="__codelineno-14-35"></a><span class="w">        </span><span class="o">}</span>
<a href="#__codelineno-14-36" id="__codelineno-14-36" name="__codelineno-14-36"></a><span class="w">        </span><span class="n">rpcUsers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span>
<a href="#__codelineno-14-37" id="__codelineno-14-37" name="__codelineno-14-37"></a><span class="w">                </span><span class="o">[</span><span class="w"> </span><span class="nl">user:</span><span class="w"> </span><span class="s2">"user1"</span><span class="o">,</span><span class="w"> </span><span class="s2">"password"</span><span class="o">:</span><span class="w"> </span><span class="s2">"test"</span><span class="o">,</span><span class="w"> </span><span class="s2">"permissions"</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="s2">"ALL"</span><span class="o">]],</span>
<a href="#__codelineno-14-38" id="__codelineno-14-38" name="__codelineno-14-38"></a><span class="w">                </span><span class="o">[</span><span class="w"> </span><span class="nl">user:</span><span class="w"> </span><span class="s2">"driverUser1"</span><span class="o">,</span><span class="w"> </span><span class="s2">"password"</span><span class="o">:</span><span class="w"> </span><span class="s2">"test"</span><span class="o">,</span><span class="w"> </span><span class="s2">"permissions"</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="s2">"ALL"</span><span class="o">]]]</span><span class="w"> </span><span class="c1">// &lt;-- Driver RPC User</span>
<a href="#__codelineno-14-39" id="__codelineno-14-39" name="__codelineno-14-39"></a><span class="w">    </span><span class="o">}</span>
<a href="#__codelineno-14-40" id="__codelineno-14-40" name="__codelineno-14-40"></a><span class="o">}</span>
</code></pre></div></p>
</li>
</ul>
<h2 id="startup-and-bootstrap-phase">Startup and Bootstrap Phase<a class="headerlink" href="#startup-and-bootstrap-phase" title="Permanent link">¶</a></h2>
<p>To launch a network using containerized components, you will typically use a Docker Compose or Kubernetes configuration file. No modifications are needed to the node's configurations. Sample instructions are given below for networks launched using Docker Compose; we leave it to the reader to adapt these to their custom launch processes.</p>
<h3 id="for-asset-exchange_2">For Asset Exchange<a class="headerlink" href="#for-asset-exchange_2" title="Permanent link">¶</a></h3>
<p>The asset exchange mode currently requires only the Interoperation CorDapp module from Weaver. Relays and drivers are not necessary. In the future, we expect to make the asset exchange protocol moe automated using these components; the instructions here will be updated appropriately.</p>
<h3 id="install-interoperation-cordapp-on-nodes">Install Interoperation CorDapp on Nodes<a class="headerlink" href="#install-interoperation-cordapp-on-nodes" title="Permanent link">¶</a></h3>
<p>After bootstrapping the nodes folder, copy the following two CorDapps in <code>build/nodes/PartyA/cordapps</code> and <code>build/nodes/PartyB/cordapps</code> folders (<code>PartyA</code> and <code>PartyB</code> node names are for example only):</p>
<ul>
<li><a href="https://github.com/hyperledger-cacti/cacti/packages/1856825">org.hyperledger.cacti.weaver.imodule.corda.interop-contracts</a></li>
<li><a href="https://github.com/hyperledger-cacti/cacti/packages/1856826">org.hyperledger.cacti.weaver.imodule.corda.interop-workflows</a></li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">You can follow any installation process for this CorDapp, but make sure it is installed on all the nodes that maintain the states involved in cross-network operations in their vaults.</td>
</tr>
</tbody>
</table>
<h3 id="for-data-sharing-or-asset-transfer">For Data Sharing or Asset Transfer<a class="headerlink" href="#for-data-sharing-or-asset-transfer" title="Permanent link">¶</a></h3>
<p>Both the data sharing and asset transfer modes require the Interoperation CorDapp, relays, and drivers, to be deployed.</p>
<h4 id="install-interoperation-cordapp-on-nodes_1">Install Interoperation CorDapp on Nodes<a class="headerlink" href="#install-interoperation-cordapp-on-nodes_1" title="Permanent link">¶</a></h4>
<p>After bootstrapping the nodes folder, copy the following two CorDapps in <code>build/nodes/PartyA/cordapps</code> and <code>build/nodes/PartyB/cordapps</code> folders (<code>PartyA</code> and <code>PartyB</code> node names are for example only):</p>
<ul>
<li><a href="https://github.com/hyperledger-cacti/cacti/packages/1856825">org.hyperledger.cacti.weaver.imodule.corda.interop-contracts</a></li>
<li><a href="https://github.com/hyperledger-cacti/cacti/packages/1856826">org.hyperledger.cacti.weaver.imodule.corda.interop-workflows</a></li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">You can follow any installation process for this CorDapp, but make sure it is installed on all the nodes that maintain the states involved in cross-network operations in their vaults.</td>
</tr>
</tbody>
</table>
<h4 id="launch-relay">Launch Relay<a class="headerlink" href="#launch-relay" title="Permanent link">¶</a></h4>
<p>You need to run one or more relays for network-to-network communication. Here we provide instructions to run one relay running in a Docker container, which is sufficient for data sharing. (Later, we will provide instructions to run multiple relays, which will be useful from a failover perspective.)</p>
<p>Weaver provides a <a href="https://github.com/hyperledger-cacti/cacti/pkgs/container/cacti-weaver-relay-server">pre-built image</a> for the relay. Before launching a container, you just need to customize its configuration for your Fabric network, which you can do by simply creating a folder (let's call it <code>relay_config</code>) and configuring the following files in it:</p>
<ul>
<li><code>.env</code>: This sets suitable environment variables within the relay container. Copy the <code>.env.template</code> file <a href="https://github.com/hyperledger-cacti/cacti/blob/main/weaver/core/relay/.env.template">from the repository</a> and customize it for your purposes, as indicated in the below sample:
  <div class="highlight"><pre><span></span><code><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a>PATH_TO_CONFIG=./config.toml
<a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a>RELAY_NAME=&lt;"name" in config.toml&gt;
<a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a>RELAY_PORT=&lt;relay-server-port/"port" in config.toml&gt;
<a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a>EXTERNAL_NETWORK=&lt;docker-bridge-network&gt;
<a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a>DOCKER_IMAGE_NAME=ghcr.io/hyperledger/cacti-weaver-relay-server
<a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a>DOCKER_TAG=2.0.0-rc.2
</code></pre></div><ul>
<li>The <code>PATH_TO_CONFIG</code> variable should point to the properties file typically named <code>config.toml</code> (you can name this whatever you wish). See further below for instructions to write this file.</li>
<li>The <code>RELAY_NAME</code> variable specifies a unique name for this relay. It should match what's specified in the <code>config.toml</code> (more on that below).</li>
<li>The <code>RELAY_PORT</code> variable specifies the port this relay server will listen on. It should match what's specified in the <code>config.toml</code> (more on that below).</li>
<li>The <code>EXTERNAL_NETWORK</code> variable should be set to the <a href="https://docs.docker.com/compose/networking/">name</a> of your Fabric network.</li>
<li>The <code>DOCKER_*</code> variables are used to specify the image on which the container will be built. Make sure you set <code>DOCKER_TAG</code> to the latest version you see on <a href="https://github.com/hyperledger-cacti/cacti/pkgs/container/cacti-weaver-relay-server">GitHub</a>.</li>
</ul>
</li>
</ul>
<p>For more details, see the <a href="https://github.com/hyperledger-cacti/cacti/blob/main/weaver/core/relay/relay-docker.md">Relay Docker README</a> ("Relay Server Image" and "Running With Docker Compose" sections).</p>
<ul>
<li><code>config.toml</code>: This is the file specified in the <code>PATH_TO_CONFIG</code> variable in the <code>.env</code>. It specifies properties of this relay and the driver(s) it supports. A sample is given below:
  <div class="highlight"><pre><span></span><code><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="n">name</span><span class="o">=</span><span class="err">&lt;relay-name&gt;</span>
<a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="n">port</span><span class="o">=</span><span class="err">&lt;relay-port&gt;</span>
<a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="n">host</span><span class="o">=</span><span class="s2">"0.0.0.0"</span>
<a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="n">db_path</span><span class="o">=</span><span class="s2">"db/&lt;relay-name&gt;/requests"</span>
<a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="n">remote_db_path</span><span class="o">=</span><span class="s2">"db/&lt;relay-name&gt;/remote_request"</span>
<a href="#__codelineno-16-6" id="__codelineno-16-6" name="__codelineno-16-6"></a>
<a href="#__codelineno-16-7" id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="c1"># FOR TLS</span>
<a href="#__codelineno-16-8" id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="n">cert_path</span><span class="o">=</span><span class="s2">"credentials/fabric_cert.pem"</span>
<a href="#__codelineno-16-9" id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="n">key_path</span><span class="o">=</span><span class="s2">"credentials/fabric_key"</span>
<a href="#__codelineno-16-10" id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="n">tls</span><span class="o">=</span><span class="err">&lt;</span><span class="kc">true</span><span class="err">/</span><span class="n">false</span><span class="err">&gt;</span>
<a href="#__codelineno-16-11" id="__codelineno-16-11" name="__codelineno-16-11"></a>
<a href="#__codelineno-16-12" id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="k">[networks]</span>
<a href="#__codelineno-16-13" id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="k">[networks.</span><span class="err">&lt;</span><span class="k">network-name</span><span class="err">&gt;</span><span class="k">]</span>
<a href="#__codelineno-16-14" id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="n">network</span><span class="o">=</span><span class="s2">"&lt;driver-name&gt;"</span>
<a href="#__codelineno-16-15" id="__codelineno-16-15" name="__codelineno-16-15"></a>
<a href="#__codelineno-16-16" id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="k">[relays]</span>
<a href="#__codelineno-16-17" id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="k">[relays.</span><span class="err">&lt;</span><span class="k">foreign-relay-name</span><span class="err">&gt;</span><span class="k">]</span>
<a href="#__codelineno-16-18" id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="n">hostname</span><span class="o">=</span><span class="s2">"&lt;foreign-relay-hostname-or-ip-address&gt;"</span>
<a href="#__codelineno-16-19" id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="n">port</span><span class="o">=</span><span class="s2">"&lt;foreign-relay-port&gt;"</span>
<a href="#__codelineno-16-20" id="__codelineno-16-20" name="__codelineno-16-20"></a>
<a href="#__codelineno-16-21" id="__codelineno-16-21" name="__codelineno-16-21"></a><span class="k">[drivers]</span>
<a href="#__codelineno-16-22" id="__codelineno-16-22" name="__codelineno-16-22"></a><span class="k">[drivers.</span><span class="err">&lt;</span><span class="k">driver-name</span><span class="err">&gt;</span><span class="k">]</span>
<a href="#__codelineno-16-23" id="__codelineno-16-23" name="__codelineno-16-23"></a><span class="n">hostname</span><span class="o">=</span><span class="s2">"&lt;driver-hostname-or-ip-address&gt;"</span>
<a href="#__codelineno-16-24" id="__codelineno-16-24" name="__codelineno-16-24"></a><span class="n">port</span><span class="o">=</span><span class="s2">"&lt;driver-port&gt;"</span>
</code></pre></div><ul>
<li><code>&lt;relay-name&gt;</code> should be a unique ID representing this relay; e.g., <code>my_network_relay</code>. It should match the <code>RELAY_NAME</code> value in <code>.env</code>.</li>
<li><code>&lt;relay-port&gt;</code> is the port number the relay server will listen on. It should match the <code>RELAY_PORT</code> value in <code>.env</code>.</li>
<li><code>db_path</code> and <code>remote_db_path</code> are used internally by the relay to store data. Replace <code>&lt;relay-name&gt;</code> with the same value set for the <code>name</code> parameter. (These can point to any filesystem paths in the relay's container.)</li>
<li>If you set <code>tls</code> to <code>true</code>, the relay will enforce TLS communication. The <code>cert_path</code> and <code>key_path</code> should point to a Fabric TLS certificate and key respectively, such as those created using the <code>cryptogen</code> tool.</li>
<li><code>&lt;network-name&gt;</code> is a unique identifier for your local network. You can set it to whatever value you wish.</li>
<li><code>&lt;driver-name&gt;</code> refers to the driver used by this relay to respond to requests. This also refers to one of the drivers's specifications in the <code>drivers</code> section further below. In this code snippet, we have defined one driver. (The names in lines 14 and 22 must match.) In lines 23 and 24 respectively, you should specify the hostname and port for the driver (whose configuration we will handle later).</li>
<li>The <code>relays</code> section specifies all foreign relays this relay can connect to. The <code>&lt;foreign-relay-name&gt;</code> value should be a unique ID for a given foreign relay, and this value will be used by your Layer-2 applications when constructing view addresses for data sharing requests. In lines 18 and 19, you should specify the hostname and port for the foreign relay.</li>
<li><strong>Enabling TLS</strong>:<ul>
<li>You can make your relay accept TLS connections by specifying a TLS certificate file path and private key file path in <code>cert_path</code> and <code>key_path</code> respectively, and set <code>tls</code> to <code>true</code>.</li>
<li>To communicate with a foreign relay using TLS, specify that relay's TLS CA certificate path in <code>tlsca_cert_path</code> (currently only one certificate can be configured) and set <code>tls</code> to <code>true</code> by extending that relay's section as follows (<em>Note</em>: this CA certificate should match the one specified in the <code>cert_path</code> property in the foreign relay's <code>config.toml</code> file):
  <div class="highlight"><pre><span></span><code><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">[relays]</span>
<a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="k">[relays.</span><span class="err">&lt;</span><span class="k">foreign-relay-name</span><span class="err">&gt;</span><span class="k">]</span>
<a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="n">hostname</span><span class="o">=</span><span class="s2">"&lt;foreign-relay-hostname-or-ip-address&gt;"</span>
<a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="n">port</span><span class="o">=</span><span class="s2">"&lt;foreign-relay-port&gt;"</span>
<a href="#__codelineno-17-5" id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="n">tls</span><span class="o">=</span><span class="err">&lt;</span><span class="kc">true</span><span class="err">|</span><span class="n">false</span><span class="err">&gt;</span>
<a href="#__codelineno-17-6" id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="n">tlsca_cert_path</span><span class="o">=</span><span class="s2">"&lt;relay-tls-ca-certificate-path&gt;"</span>
</code></pre></div></li>
<li>To communicate with a driver using TLS, specify the driver's TLS CA certificate in <code>tlsca_cert_path</code> (currently only one certificate can be configured) and set <code>tls</code> to <code>true</code> by extending that driver's section as follows (<em>Note</em>: this CA certificate must match the certificate used by the driver using the <code>DRIVER_TLS_CERT_PATH</code> property in its <code>.env</code> configuration file, which we will examine later):
  <div class="highlight"><pre><span></span><code><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="k">[drivers]</span>
<a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="k">[drivers.</span><span class="err">&lt;</span><span class="k">driver-name</span><span class="err">&gt;</span><span class="k">]</span>
<a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="n">hostname</span><span class="o">=</span><span class="s2">"&lt;driver-hostname-or-ip-address&gt;"</span>
<a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="n">port</span><span class="o">=</span><span class="s2">"&lt;driver-port&gt;"</span>
<a href="#__codelineno-18-5" id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="n">tls</span><span class="o">=</span><span class="err">&lt;</span><span class="kc">true</span><span class="err">|</span><span class="n">false</span><span class="err">&gt;</span>
<a href="#__codelineno-18-6" id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="n">tlsca_cert_path</span><span class="o">=</span><span class="s2">"&lt;driver-tls-ca-certificate-path&gt;"</span>
</code></pre></div></li>
</ul>
</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">You can specify more than one foreign relay instance in the <code>relays</code> section.</td>
</tr>
<tr>
<td style="text-align: left;">You can specify more than one driver instance in the <code>drivers</code> section.</td>
</tr>
</tbody>
</table>
<ul>
<li><code>docker-compose.yaml</code>: This specifies the properties of the relay container. You can use the <a href="https://github.com/hyperledger-cacti/cacti/blob/main/weaver/core/relay/docker-compose.yaml">file in the repository</a> verbatim.</li>
</ul>
<p>To start the relay server, navigate to the folder containing the above files and run the following:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>relay-server
</code></pre></div></p>
<h4 id="launch-driver">Launch Driver<a class="headerlink" href="#launch-driver" title="Permanent link">¶</a></h4>
<p>You need to run one or more drivers through which your relay can interact with your Corda network. Here we provide instructions to run one Corda driver running in a Docker container, which is sufficient for data sharing. (Later, we will provide instructions to run multiple drivers, which will be useful both from a failover perspective and to interact with different subsets of your Corda network.)</p>
<p>Weaver provides a <a href="https://github.com/hyperledger-cacti/cacti/pkgs/container/cacti-weaver-driver-corda">pre-built image</a> for the Corda driver. Before launching a container, you just need to customize the container configuration for your Corda network, which you can do by simply configuring the following:</p>
<ul>
<li>
<p><code>.env</code>: This sets suitable environment variables within the driver container. Copy the <code>.env.docker.template</code> file <a href="https://github.com/hyperledger-cacti/cacti/blob/main/weaver/core/drivers/corda-driver/.env.docker.template">from the repository</a> and customize it for your purposes, as indicated in the below sample:
  <div class="highlight"><pre><span></span><code><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a>NETWORK_NAME=&lt;container-name-suffix&gt;
<a href="#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a>DRIVER_PORT=&lt;driver-server-port&gt;
<a href="#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a>DRIVER_RPC_USERNAME=&lt;driver-rpc-username&gt;
<a href="#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a>DRIVER_RPC_PASSWORD=&lt;driver-rpc-username&gt;
<a href="#__codelineno-20-5" id="__codelineno-20-5" name="__codelineno-20-5"></a>EXTERNAL_NETWORK=&lt;docker-bridge-network&gt;
<a href="#__codelineno-20-6" id="__codelineno-20-6" name="__codelineno-20-6"></a>DOCKER_IMAGE_NAME=ghcr.io/hyperledger/cacti-weaver-driver-corda
<a href="#__codelineno-20-7" id="__codelineno-20-7" name="__codelineno-20-7"></a>DOCKER_TAG=2.0.0-rc.2
<a href="#__codelineno-20-8" id="__codelineno-20-8" name="__codelineno-20-8"></a>RELAY_TLS=&lt;true|false&gt;
<a href="#__codelineno-20-9" id="__codelineno-20-9" name="__codelineno-20-9"></a>RELAY_TLSCA_TRUST_STORE=&lt;truststore-jks-file-path&gt;
<a href="#__codelineno-20-10" id="__codelineno-20-10" name="__codelineno-20-10"></a>RELAY_TLSCA_TRUST_STORE_PASSWORD=&lt;truststore-jks-file-password&gt;
<a href="#__codelineno-20-11" id="__codelineno-20-11" name="__codelineno-20-11"></a>RELAY_TLSCA_CERT_PATHS=&lt;colon-separated-CA-cert-paths&gt;
<a href="#__codelineno-20-12" id="__codelineno-20-12" name="__codelineno-20-12"></a>DRIVER_TLS=&lt;true|false&gt;
<a href="#__codelineno-20-13" id="__codelineno-20-13" name="__codelineno-20-13"></a>DRIVER_TLS_CERT_PATH=&lt;cert-path&gt;
<a href="#__codelineno-20-14" id="__codelineno-20-14" name="__codelineno-20-14"></a>DRIVER_TLS_KEY_PATH=&lt;private-key-path&gt;
</code></pre></div></p>
<ul>
<li><code>NETWORK_NAME</code> is only used as suffix for container and has no other significance.</li>
<li><code>DRIVER_PORT</code> variable should be set to the port this driver will listen on.</li>
<li><code>DRIVER_RPC_USERNAME</code> variable should be set to rpc user created <a href="#pre-configuration">above</a> for the driver.</li>
<li><code>DRIVER_RPC_PASSWORD</code> variable should be set to password of above rpc user.</li>
<li><code>EXTERNAL_NETWORK</code> variable should be set to the <a href="https://docs.docker.com/compose/networking/">name</a> of your Corda network.</li>
<li><strong>Enabling TLS</strong>:<ul>
<li>You can make your driver accept TLS connections by specifying <code>DRIVER_TLS</code> as <code>true</code> and specifying a TLS certificate file path and private key file path in <code>DRIVER_TLS_CERT_PATH</code> and <code>DRIVER_TLS_KEY_PATH</code> respectively. The same certificate should be specified in this driver's definition in the <code>drivers</code> section in the <code>config.toml</code> file of your relay in the <code>tlsca_cert_path</code> property (see the earlier section on relay configuration).</li>
<li>To communicate with your network' relay using TLS (i.e., if the relay is TLS-enabled), specify that relay's TLS CA certificate path in <code>RELAY_TLSCA_CERT_PATH</code> (currently only one certificate can be configured) and set <code>RELAY_TLS</code> to <code>true</code>. This CA certificate should match the one specified in the <code>cert_path</code> property in the relay's <code>config.toml</code> file (see the earlier section on relay configuration):</li>
<li>You can point to the folder in your host system containing the certificate and key using the <code>TLS_CREDENTIALS_DIR</code> variable. (This folder will be synced to the <code>/corda-driver/credentials</code> folder in the Fabric Driver container as specified in the <a href="https://github.com/hyperledger-cacti/cacti/blob/main/weaver/core/drivers/fabric-driver/docker-compose.yml">docker compose file</a>.) Make sure you point to the right certificate and key file paths within the container using the <code>DRIVER_TLS_CERT_PATH</code>, <code>DRIVER_TLS_KEY_PATH</code>, and <code>RELAY_TLSCA_CERT_PATH</code> variables.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>docker-compose.yaml</code>: This specifies the properties of the driver container. You can use the <a href="https://github.com/hyperledger-cacti/cacti/blob/main/weaver/core/drivers/corda-driver/docker-compose.yml">file in the repository</a> verbatim.</p>
</li>
</ul>
<p>To start the driver, navigate to the folder containing the above files and run the following:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div></p>
<h4 id="vault-initialization">Vault Initialization<a class="headerlink" href="#vault-initialization" title="Permanent link">¶</a></h4>
<p>To prepare your network for interoperation with a foreign network, you need to record the following to your vault using the <a href="https://github.com/hyperledger-cacti/cacti/packages/1856827">Corda SDK</a> (<code>org.hyperledger.cacti.weaver.sdk.corda.weaver-sdk-corda</code>):</p>
<ul>
<li><strong>Access control policies</strong>:
  Let's take the example of the request made from <code>trade-finance-network</code> to <code>trade-logistics-network</code> for a B/L earlier in this document. <code>trade-logistics-network</code> can have a policy of the following form permitting access to the <code>GetBillOfLading</code> function from a client representing the <code>PartyA</code> node in <code>trade-finance-network</code> as follows:
  <div class="highlight"><pre><span></span><code><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="p">{</span>
<a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="w">    </span><span class="nt">"securityDomain"</span><span class="p">:</span><span class="s2">"trade-finance-network"</span><span class="p">,</span>
<a href="#__codelineno-22-3" id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">    </span><span class="nt">"rules"</span><span class="p">:</span>
<a href="#__codelineno-22-4" id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">        </span><span class="p">[</span>
<a href="#__codelineno-22-5" id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="w">            </span><span class="p">{</span>
<a href="#__codelineno-22-6" id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="w">                </span><span class="nt">"principal"</span><span class="p">:</span><span class="s2">"&lt;PartyA-certificate-pem&gt;"</span><span class="p">,</span>
<a href="#__codelineno-22-7" id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">                </span><span class="nt">"principalType"</span><span class="p">:</span><span class="s2">"certificate"</span><span class="p">,</span>
<a href="#__codelineno-22-8" id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="w">                </span><span class="nt">"resource"</span><span class="p">:</span><span class="s2">"exporternode:10003;carriernode:10003#com.mynetwork.flow.GetBillOfLading:*"</span><span class="p">,</span>
<a href="#__codelineno-22-9" id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">                </span><span class="nt">"read"</span><span class="p">:</span><span class="kc">true</span>
<a href="#__codelineno-22-10" id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="w">            </span><span class="p">}</span>
<a href="#__codelineno-22-11" id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="w">        </span><span class="p">]</span>
<a href="#__codelineno-22-12" id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="p">}</span>
</code></pre></div>
  In this sample, a single rule is specified for requests coming from <code>trade-finance-network</code>: it states that a workflow call to <code>com.mynetwork.flow.GetBillOfLading</code> made to <code>exporter</code> and <code>carrier</code> nodes of remote Corda network is permitted for a requestor whose certificate is specified in the <code>principal</code> attribute. The <code>*</code> at the end indicates that any arguments passed to the function will pass the access control check. The <code>exporternode:10003</code> and <code>carriernode:10003</code> are of form <code>&lt;hostname/IP&gt;:&lt;RPC_Port&gt;</code>, for <code>exporter</code> and <code>carrier</code> nodes respectively in the remote Corda network.</li>
</ul>
<p>You need to record this policy rule on your Corda network's vault by invoking either the <code>AccessControlPolicyManager.createAccessControlPolicyState</code> function or the <code>AccessControlPolicyManager.updateAccessControlPolicyState</code> function on the <code>weaver-sdk-corda</code>; use the former if you are recording a set of rules for the given <code>securityDomain</code> for the first time and the latter to overwrite a set of rules recorded earlier. The above JSON needs to be converted to protobuf object of <code>org.hyperledger.cacti.weaver.protos.common.access_control.AccessControl.AccessControlPolicy</code>, using google's protobuf library, and the object is the second argument of above functions (first being the instance of CordaRPCOps).</p>
<ul>
<li><strong>Verification policies</strong>:
  Taking the same example as above, an example of a verification policy for a B/L requested by the <code>trade-finance-network</code> from the <code>trade-logistics-network</code> is as follows:
  <div class="highlight"><pre><span></span><code><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="p">{</span>
<a href="#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="w">    </span><span class="nt">"securityDomain"</span><span class="p">:</span><span class="s2">"trade-logistics-network"</span><span class="p">,</span>
<a href="#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">    </span><span class="nt">"identifiers"</span><span class="p">:</span>
<a href="#__codelineno-23-4" id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="w">        </span><span class="p">[</span>
<a href="#__codelineno-23-5" id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="w">            </span><span class="p">{</span>
<a href="#__codelineno-23-6" id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="w">                </span><span class="nt">"pattern"</span><span class="p">:</span><span class="s2">"tradelogisticschannel:shipmentcc:GetBillOfLading:*"</span><span class="p">,</span>
<a href="#__codelineno-23-7" id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="w">                </span><span class="nt">"policy"</span><span class="p">:</span>
<a href="#__codelineno-23-8" id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="w">                    </span><span class="p">{</span>
<a href="#__codelineno-23-9" id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="w">                        </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"Signature"</span><span class="p">,</span>
<a href="#__codelineno-23-10" id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="w">                        </span><span class="nt">"criteria"</span><span class="p">:</span>
<a href="#__codelineno-23-11" id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="w">                            </span><span class="p">[</span>
<a href="#__codelineno-23-12" id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="w">                                </span><span class="s2">"ExporterMSP"</span><span class="p">,</span>
<a href="#__codelineno-23-13" id="__codelineno-23-13" name="__codelineno-23-13"></a><span class="w">                                </span><span class="s2">"CarrierMSP"</span>
<a href="#__codelineno-23-14" id="__codelineno-23-14" name="__codelineno-23-14"></a><span class="w">                            </span><span class="p">]</span>
<a href="#__codelineno-23-15" id="__codelineno-23-15" name="__codelineno-23-15"></a><span class="w">                    </span><span class="p">}</span>
<a href="#__codelineno-23-16" id="__codelineno-23-16" name="__codelineno-23-16"></a><span class="w">            </span><span class="p">}</span>
<a href="#__codelineno-23-17" id="__codelineno-23-17" name="__codelineno-23-17"></a><span class="w">        </span><span class="p">]</span>
<a href="#__codelineno-23-18" id="__codelineno-23-18" name="__codelineno-23-18"></a><span class="p">}</span>
</code></pre></div>
  In this sample, a single verification policy rule is specified for data views coming from <code>trade-logistics-network</code>: it states that the data returned by the <code>GetBillOfLading</code> query made to the <code>shipmentcc</code> chaincode on the <code>tradelogisticschannel</code> channel requires as proof two signatures, one from a peer in the organization whose MSP ID is <code>ExporterMSP</code> and another from a peer in the organization whose MSP ID is <code>CarrierMSP</code>.</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">If the remote network is built on Corda, the resource specified in the access control policy can be used here as the <code>pattern</code>, with different node names specified in the <code>criteria</code>.</td>
</tr>
</tbody>
</table>
<p>You need to record this policy rule on your Corda network's vault by invoking Corda sdk's function <code>VerificationPolicyManager.createVerificationPolicyState(proxy, verificationPolicyProto)</code>, where <code>proxy</code> is an instance of <code>CordaRPCOps</code> as described in previous sections, and <code>verificationPolicyProto</code> is an object of protobuf <code>org.hyperledger.cacti.weaver.protos.common.verification_policy.VerificationPolicyOuterClass.VerificationPolicy</code>. You can examine the full proto structure <a href="https://github.com/hyperledger-cacti/cacti/blob/main/weaver/common/protos/common/verification_policy.proto">here</a>. (<em>Google's protobuf library can be used to convert above JSON to protobuf object.</em>)</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">For any cross-network data request, make sure an access control policy is recorded in the <em>source network</em> (<code>trade-logistics-network</code> in the above example) and a corresponding verification policy is recorded in the <em>destination network</em> (<code>trade-finance-network</code> in the above example) before any relay request is triggered.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Foreign network security domain (membership) configuration</strong>:
  Run the following procedure (pseudocode) to record security domain configuration for every foreign network you wish your Corda network to interoperate with (you will need to collect the identity service URLs for all the foreign networks first):
  <div class="highlight"><pre><span></span><code><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a>for each foreign network:
<a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a>    send an HTTP GET request to the network's identity service (using 'curl' or 'wget' from a shell script or equivalent programming language APIs).
<a href="#__codelineno-24-3" id="__codelineno-24-3" name="__codelineno-24-3"></a>    convert the response string to protobuf object of 'org.hyperledger.cacti.weaver.protos.common.membership.MembershipOuterClass.Membership'.
<a href="#__codelineno-24-4" id="__codelineno-24-4" name="__codelineno-24-4"></a>    invoke 'MembershipManager.createMembershipState(proxy, membershipProto)' or 'MembershipManager.updateMembershipState(proxy, membershipProto)' on Corda sdk.
</code></pre></div>
  As in the above two cases, use <code>createMembershipState</code> to record a confiuration for the first time for a given <code>securityDomain</code> and <code>updateMembershipState</code> to overwrite a configuration.</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Security domain configurations (organization lists and their certificate chains) for any Fabric/Corda network are subject to change, so you should run the above procedure periodically in a loop.</td>
</tr>
</tbody>
</table>
<p>Your Corda network is now up and running with the necessary Weaver components, and your network's vault is bootstrapped with the initial configuration necessary for cross-network interactions!</p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Hyperledger Fabric" class="md-footer__link md-footer__link--prev" href="../fabric/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                Hyperledger Fabric
              </div>
</div>
</a>
<a aria-label="Next: Hyperledger Besu" class="md-footer__link md-footer__link--next" href="../besu/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                Hyperledger Besu
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © Hyperledger 2020-2023
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../../..", "features": ["content.code.copy", "navigation.expand", "navigation.footer", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "toc.follow", "toc.integrate"], "search": "../../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
<script src="../../../../assets/javascripts/bundle.525ec568.min.js"></script>
<script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body>
</html>