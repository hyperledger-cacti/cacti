# =============================================================================
# newSessionRequest Step Configuration - Stage 0 Focused Testing
# =============================================================================
#
# PURPOSE:
# Minimal configuration for testing adapters at the newSessionRequest step.
# Used by adapter-e2e-mock.test.ts for YAML configuration loading tests.
#
# EXECUTION FLOW:
# Stage 0, newSessionRequest:
#   1. "before" point → Outbound webhook calls validation service
#   2. SATP processes the new session request
#   3. "after" point → Inbound webhook pauses for external approval
#
# ADAPTER DEFINITIONS:
# - newSessionRequest-outbound-validator: Pre-validation before processing
# - newSessionRequest-inbound-approval: Post-processing approval gate
#
# TIMEOUT CONFIGURATION:
# - Outbound: 5 seconds with 3 retries
# - Inbound: 3 seconds (short for testing, production would be 5+ minutes)
# =============================================================================

# Adapter configuration for newSessionRequest step in Stage 0
# - 1 outbound webhook at "before" point (calls external validation service)
# - 1 inbound webhook at "after" point (mocked, with 3 second timeout)
adapters:
  - id: "newSessionRequest-outbound-validator"
    name: "New Session Request Validator"
    description: "Validates new session request before processing"
    executionPoints:
      - stage: "stage0"
        step: newSessionRequest
        point: "before"
    outboundWebhook:
      url: "http://localhost:9223/webhook/outbound/validate"
      timeoutMs: 5000
      retryAttempts: 3
      retryDelayMs: 1000
    active: true
    priority: 1

  - id: "newSessionRequest-inbound-approval"
    name: "New Session Request Approval"
    description: "Awaits external approval after session request processing"
    executionPoints:
      - stage: "stage0"
        step: newSessionRequest
        point: "after"
    inboundWebhook:
      timeoutMs: 3000  # 3 second timeout for inbound webhook
    active: true
    priority: 2

# Global configuration
global:
  timeoutMs: 5000
  retryAttempts: 3
  retryDelayMs: 500
  logLevel: "debug"
