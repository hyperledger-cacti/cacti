version: "3.8"

services:
  satp-hermes-gateway:
    build:
      context: ./
      dockerfile: satp-hermes-gateway.Dockerfile
    ports:
      - 3010:3010/tcp # SERVER_PORT
      - 3011:3011/tcp # CLIENT_PORT
      - 3012:4010/tcp # API_PORT
  #https://grafana.com/blog/2024/03/13/an-opentelemetry-backend-in-a-docker-image-introducing-grafana/otel-lgtm/
    otel-collector:
      image: grafana/otel-lgtm:latest
      container_name: otel-collector
      environment:
        - OTEL_METRIC_EXPORT_INTERVAL=500
      ports:
        - "3013:4317" # OpenTelemetry gRPC endpoint
        - "3014:4318" # OpenTelemetry HTTP endpoint